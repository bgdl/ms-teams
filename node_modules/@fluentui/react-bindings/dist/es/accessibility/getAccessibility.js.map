{"version":3,"sources":["accessibility/getAccessibility.ts"],"names":["getKeyDownHandlers","emptyBehavior","attributes","keyHandlers","getAccessibility","displayName","behavior","behaviorProps","isRtlEnabled","actionHandlers","undefined","definition","keyActions","process","env","NODE_ENV","Object","keys","forEach","slotName","validatorName"],"mappings":"AAOA,OAAOA,kBAAP,MAA+B,sBAA/B;AAGA,IAAMC,aAAyC,GAAG;AAChDC,EAAAA,UAAU,EAAE,EADoC;AAEhDC,EAAAA,WAAW,EAAE;AAFmC,CAAlD;;AAKA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CACvBC,WADuB,EAEvBC,QAFuB,EAGvBC,aAHuB,EAIvBC,YAJuB,EAKvBC,cALuB,EAMQ;AAC/B,MAAIH,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAKI,SAAtC,EAAiD;AAC/C,WAAOT,aAAP;AACD;;AAED,MAAMU,UAAmC,GAAGL,QAAQ,CAACC,aAAD,CAApD;AACA,MAAMJ,WAAW,GACfM,cAAc,IAAIE,UAAU,CAACC,UAA7B,GACIZ,kBAAkB,CAACS,cAAD,EAAiBE,UAAU,CAACC,UAA5B,EAAwCJ,YAAxC,CADtB,GAEI,EAHN;;AAKA,MAAIK,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC;AACA;AACA;AACA,QAAIJ,UAAU,CAACT,UAAf,EAA2B;AACzBc,MAAAA,MAAM,CAACC,IAAP,CAAYN,UAAU,CAACT,UAAvB,EAAmCgB,OAAnC,CAA2C,UAAAC,QAAQ,EAAI;AACrD,YAAMC,aAAa,aAAMf,WAAN,SAAoBc,QAAQ,KAAK,MAAb,GAAsB,EAAtB,eAAgCA,QAAhC,CAApB,CAAnB;;AAEA,YAAI,CAAER,UAAU,CAACT,UAAZ,CAAyDiB,QAAzD,CAAL,EAAyE;AACtER,UAAAA,UAAU,CAACT,UAAZ,CAAyDiB,QAAzD,IAAqE,EAArE;AACD;;AAEAR,QAAAA,UAAU,CAACT,UAAZ,CAAyDiB,QAAzD,EAAmE,eAAnE,IAAsFC,aAAtF;AACD,OARD;AASD;AACF;;AAED,2BACKnB,aADL,MAEKU,UAFL;AAGER,IAAAA,WAAW,EAAXA;AAHF;AAKD,CAvCD;;AAyCA,eAAeC,gBAAf","sourcesContent":["import {\n  Accessibility,\n  AccessibilityAttributes,\n  AccessibilityAttributesBySlot,\n  AccessibilityDefinition,\n} from '@fluentui/accessibility';\n\nimport getKeyDownHandlers from './getKeyDownHandlers';\nimport { AccessibilityActionHandlers, ReactAccessibilityBehavior } from './types';\n\nconst emptyBehavior: ReactAccessibilityBehavior = {\n  attributes: {},\n  keyHandlers: {},\n};\n\nconst getAccessibility = <Props extends Record<string, any>>(\n  displayName: string,\n  behavior: Accessibility<Props>,\n  behaviorProps: Props,\n  isRtlEnabled: boolean,\n  actionHandlers?: AccessibilityActionHandlers,\n): ReactAccessibilityBehavior => {\n  if (behavior === null || behavior === undefined) {\n    return emptyBehavior;\n  }\n\n  const definition: AccessibilityDefinition = behavior(behaviorProps);\n  const keyHandlers =\n    actionHandlers && definition.keyActions\n      ? getKeyDownHandlers(actionHandlers, definition.keyActions, isRtlEnabled)\n      : {};\n\n  if (process.env.NODE_ENV !== 'production') {\n    // For the non-production builds we enable the runtime accessibility attributes validator.\n    // We're adding the data-aa-class attribute which is being consumed by the validator, the\n    // schema is located in @stardust-ui/ability-attributes package.\n    if (definition.attributes) {\n      Object.keys(definition.attributes).forEach(slotName => {\n        const validatorName = `${displayName}${slotName === 'root' ? '' : `__${slotName}`}`;\n\n        if (!(definition.attributes as AccessibilityAttributesBySlot)[slotName]) {\n          (definition.attributes as AccessibilityAttributesBySlot)[slotName] = {} as AccessibilityAttributes;\n        }\n\n        (definition.attributes as AccessibilityAttributesBySlot)[slotName]['data-aa-class'] = validatorName;\n      });\n    }\n  }\n\n  return {\n    ...emptyBehavior,\n    ...definition,\n    keyHandlers,\n  };\n};\n\nexport default getAccessibility;\n"],"file":"getAccessibility.js"}