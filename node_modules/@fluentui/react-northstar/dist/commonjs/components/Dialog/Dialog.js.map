{"version":3,"sources":["components/Dialog/Dialog.tsx"],"names":["dialogsCounterAttribute","Dialog","closeAndFocusTrigger","e","handleDialogCancel","stopPropagation","triggerRef","close","React","createRef","props","open","setState","predefinedProps","onClick","buttonProps","handleDialogConfirm","isInsideContentClick","contentRef","current","context","target","isInsideOverlayClick","overlayRef","shouldClose","getRefs","lastOverlayRef","pop","isLastOpenedDialog","keyboardKey","getCode","Escape","openDialogs","body","getAttribute","setAttribute","removeAttribute","_","prevState","state","unlockBodyScroll","lockBodyScroll","accessibility","classes","ElementType","styles","unhandledProps","rtl","actions","cancelButton","closeOnOutsideClick","confirmButton","content","header","headerAction","overlay","trapFocus","trigger","footer","cancelElement","Button","create","overrideProps","handleCancelButtonOverrides","confirmElement","defaultProps","primary","handleConfirmButtonOverrides","dialogActions","ButtonGroup","dialogContent","root","attributes","popup","keyHandlers","Header","as","className","slotClassNames","text","iconOnly","Box","DialogFooter","triggerAccessibility","handleDialogOpen","nestingRef","contentNode","handleOverlayClick","handleDocumentKeydown","contentId","headerId","AutoControlledComponent","commonPropTypes","createCommon","children","customPropTypes","itemShorthand","backdrop","PropTypes","bool","defaultOpen","onCancel","func","onConfirm","onOpen","oneOfType","object","any","dialogBehavior"],"mappings":"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","sourcesContent":["import { Accessibility, dialogBehavior } from '@fluentui/accessibility';\nimport { FocusTrapZoneProps } from '@fluentui/react-bindings';\nimport { Unstable_NestingAuto } from '@fluentui/react-component-nesting-registry';\nimport { EventListener } from '@fluentui/react-component-event-listener';\nimport { Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport * as keyboardKey from 'keyboard-key';\nimport { disableBodyScroll, enableBodyScroll } from './utils';\n\nimport {\n  UIComponentProps,\n  commonPropTypes,\n  ContentComponentProps,\n  AutoControlledComponent,\n  doesNodeContainClick,\n  applyAccessibilityKeyHandlers,\n  getOrGenerateIdFromShorthand,\n} from '../../utils';\nimport { ComponentEventHandler, WithAsProp, ShorthandValue, withSafeTypeForAs } from '../../types';\nimport Button, { ButtonProps } from '../Button/Button';\nimport ButtonGroup from '../Button/ButtonGroup';\nimport Box, { BoxProps } from '../Box/Box';\nimport Header, { HeaderProps } from '../Header/Header';\nimport Portal, { TriggerAccessibility } from '../Portal/Portal';\nimport Flex from '../Flex/Flex';\nimport DialogFooter, { DialogFooterProps } from './DialogFooter';\n\nexport interface DialogSlotClassNames {\n  header: string;\n  headerAction: string;\n  content: string;\n  overlay: string;\n  footer: string;\n}\n\nexport interface DialogProps extends UIComponentProps, ContentComponentProps<ShorthandValue<BoxProps>> {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility;\n\n  /** A dialog can contain actions. */\n  actions?: ShorthandValue<BoxProps>;\n\n  /** A dialog can have a backdrop on its overlay. */\n  backdrop?: boolean;\n\n  /** A dialog can contain a cancel button. */\n  cancelButton?: ShorthandValue<ButtonProps>;\n\n  /** A dialog can be closed when a user clicks outside of it. */\n  closeOnOutsideClick?: boolean;\n\n  /** A dialog can contain a confirm button. */\n  confirmButton?: ShorthandValue<ButtonProps>;\n\n  /** A dialog can be open by default. */\n  defaultOpen?: boolean;\n\n  /** A dialog can contain a header. */\n  header?: ShorthandValue<HeaderProps>;\n\n  /** A dialog can contain a button next to the header. */\n  headerAction?: ShorthandValue<ButtonProps>;\n\n  /** A dialog can contain a footer. */\n  footer?: ShorthandValue<DialogFooterProps>;\n\n  /**\n   * Called after a user clicks the cancel button.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onCancel?: ComponentEventHandler<DialogProps>;\n\n  /**\n   * Called after a user clicks the confirm button.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onConfirm?: ComponentEventHandler<DialogProps>;\n\n  /**\n   * Called after a user opens the dialog.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onOpen?: ComponentEventHandler<DialogProps>;\n\n  /** A dialog's open state can be controlled. */\n  open?: boolean;\n\n  /** A dialog can contain a overlay. */\n  overlay?: ShorthandValue<BoxProps>;\n\n  /** Controls whether or not focus trap should be applied, using boolean or FocusTrapZoneProps type value. */\n  trapFocus?: true | FocusTrapZoneProps;\n\n  /** Element to be rendered in-place where the dialog is defined. */\n  trigger?: JSX.Element;\n}\n\nexport interface DialogState {\n  contentId?: string;\n  headerId?: string;\n  open?: boolean;\n}\nconst dialogsCounterAttribute = 'fluent-dialogs-count';\n\nclass Dialog extends AutoControlledComponent<WithAsProp<DialogProps>, DialogState> {\n  static displayName = 'Dialog';\n  static className = 'ui-dialog';\n\n  static slotClassNames: DialogSlotClassNames;\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      children: false,\n      content: 'shorthand',\n    }),\n    actions: customPropTypes.itemShorthand,\n    backdrop: PropTypes.bool,\n    headerAction: customPropTypes.itemShorthand,\n    cancelButton: customPropTypes.itemShorthand,\n    closeOnOutsideClick: PropTypes.bool,\n    confirmButton: customPropTypes.itemShorthand,\n    defaultOpen: PropTypes.bool,\n    header: customPropTypes.itemShorthand,\n    onCancel: PropTypes.func,\n    onConfirm: PropTypes.func,\n    onOpen: PropTypes.func,\n    open: PropTypes.bool,\n    overlay: customPropTypes.itemShorthand,\n    trapFocus: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n    trigger: PropTypes.any,\n  };\n\n  static defaultProps = {\n    accessibility: dialogBehavior as Accessibility,\n    actions: {},\n    backdrop: true,\n    closeOnOutsideClick: true,\n    overlay: {},\n    footer: {},\n    trapFocus: true,\n  };\n\n  static autoControlledProps = ['open'];\n  static Footer = DialogFooter;\n\n  actionHandlers = {\n    closeAndFocusTrigger: e => {\n      this.handleDialogCancel(e);\n      e.stopPropagation();\n\n      _.invoke(this.triggerRef, 'current.focus');\n    },\n    close: e => this.handleDialogCancel(e),\n  };\n  contentRef = React.createRef<HTMLElement>() as React.MutableRefObject<HTMLElement>;\n  overlayRef = React.createRef<HTMLElement>() as React.MutableRefObject<HTMLElement>;\n  triggerRef = React.createRef<HTMLElement>();\n\n  getInitialAutoControlledState(): DialogState {\n    return {\n      open: false,\n    };\n  }\n\n  static getAutoControlledStateFromProps(props: DialogProps, state: DialogState): Partial<DialogState> {\n    return {\n      contentId: getOrGenerateIdFromShorthand('dialog-content-', props.content, state.contentId),\n      headerId: getOrGenerateIdFromShorthand('dialog-header-', props.header, state.headerId),\n    };\n  }\n\n  handleDialogCancel = (e: Event | React.SyntheticEvent) => {\n    _.invoke(this.props, 'onCancel', e, { ...this.props, open: false });\n    this.setState({ open: false });\n  };\n\n  handleDialogConfirm = (e: React.SyntheticEvent) => {\n    _.invoke(this.props, 'onConfirm', e, { ...this.props, open: false });\n    this.setState({ open: false });\n  };\n\n  handleDialogOpen = (e: React.SyntheticEvent) => {\n    _.invoke(this.props, 'onOpen', e, { ...this.props, open: true });\n    this.setState({ open: true });\n  };\n\n  handleCancelButtonOverrides = (predefinedProps: ButtonProps) => ({\n    onClick: (e: React.SyntheticEvent, buttonProps: ButtonProps) => {\n      _.invoke(predefinedProps, 'onClick', e, buttonProps);\n      this.handleDialogCancel(e);\n    },\n  });\n\n  handleConfirmButtonOverrides = (predefinedProps: ButtonProps) => ({\n    onClick: (e: React.SyntheticEvent, buttonProps: ButtonProps) => {\n      _.invoke(predefinedProps, 'onClick', e, buttonProps);\n      this.handleDialogConfirm(e);\n    },\n  });\n\n  handleOverlayClick = (e: MouseEvent) => {\n    // Dialog has different conditions to close than Popup, so we don't need to iterate across all\n    // refs\n    const isInsideContentClick = doesNodeContainClick(this.contentRef.current, e, this.context.target);\n    const isInsideOverlayClick = doesNodeContainClick(this.overlayRef.current, e, this.context.target);\n\n    const shouldClose = !isInsideContentClick && isInsideOverlayClick;\n\n    if (shouldClose) {\n      this.handleDialogCancel(e);\n    }\n  };\n\n  handleDocumentKeydown = (getRefs: Function) => (e: KeyboardEvent) => {\n    // if focus was lost from Dialog, for e.g. when click on Dialog's content\n    // and ESC is pressed, the opened Dialog should get closed and the trigger should get focus\n    const lastOverlayRef = getRefs().pop();\n    const isLastOpenedDialog: boolean = lastOverlayRef && lastOverlayRef.current === this.overlayRef.current;\n\n    if (keyboardKey.getCode(e) === keyboardKey.Escape && isLastOpenedDialog) {\n      this.handleDialogCancel(e);\n      _.invoke(this.triggerRef, 'current.focus');\n    }\n  };\n\n  lockBodyScroll() {\n    const openDialogs = (+this.context.target.body.getAttribute(dialogsCounterAttribute) || 0) + 1;\n    this.context.target.body.setAttribute(dialogsCounterAttribute, `${openDialogs}`);\n\n    // Avoid to block scroll in nested dialogs\n    if (openDialogs === 1) {\n      disableBodyScroll(this.context.target.body);\n    }\n  }\n\n  unlockBodyScroll() {\n    const openDialogs = (+this.context.target.body.getAttribute(dialogsCounterAttribute) || 0) - 1;\n    this.context.target.body.setAttribute(dialogsCounterAttribute, `${openDialogs}`);\n\n    // Only enables scroll if all dialogs are closed\n    if (openDialogs === 0) {\n      enableBodyScroll(this.context.target.body);\n      this.context.target.body.removeAttribute(dialogsCounterAttribute);\n    }\n  }\n\n  componentDidUpdate(_, prevState) {\n    // Open -> Closed\n    if (prevState.open && !this.state.open) {\n      this.unlockBodyScroll();\n    }\n    // Closed -> Open\n    if (!prevState.open && this.state.open) {\n      this.lockBodyScroll();\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.open) {\n      this.lockBodyScroll();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.state.open) {\n      this.unlockBodyScroll();\n    }\n  }\n\n  renderComponent({ accessibility, classes, ElementType, styles, unhandledProps, rtl }) {\n    const {\n      actions,\n      cancelButton,\n      closeOnOutsideClick,\n      confirmButton,\n      content,\n      header,\n      headerAction,\n      overlay,\n      trapFocus,\n      trigger,\n      footer,\n    } = this.props;\n    const { open } = this.state;\n\n    const cancelElement = Button.create(cancelButton, {\n      overrideProps: this.handleCancelButtonOverrides,\n    });\n    const confirmElement = Button.create(confirmButton, {\n      defaultProps: () => ({\n        primary: true,\n      }),\n      overrideProps: this.handleConfirmButtonOverrides,\n    });\n\n    const dialogActions =\n      (cancelElement || confirmElement) &&\n      ButtonGroup.create(actions, {\n        defaultProps: () => ({\n          styles: styles.actions,\n        }),\n        overrideProps: {\n          content: (\n            <Flex gap=\"gap.smaller\">\n              {cancelElement}\n              {confirmElement}\n            </Flex>\n          ),\n        },\n      });\n\n    const dialogContent = (\n      <Ref innerRef={this.contentRef}>\n        <ElementType\n          className={classes.root}\n          {...accessibility.attributes.popup}\n          {...unhandledProps}\n          {...applyAccessibilityKeyHandlers(accessibility.keyHandlers.popup, unhandledProps)}\n        >\n          {Header.create(header, {\n            defaultProps: () => ({\n              as: 'h2',\n              className: Dialog.slotClassNames.header,\n              styles: styles.header,\n              ...accessibility.attributes.header,\n            }),\n          })}\n          {Button.create(headerAction, {\n            defaultProps: () => ({\n              className: Dialog.slotClassNames.headerAction,\n              styles: styles.headerAction,\n              text: true,\n              iconOnly: true,\n              ...accessibility.attributes.headerAction,\n            }),\n          })}\n          {Box.create(content, {\n            defaultProps: () => ({\n              styles: styles.content,\n              className: Dialog.slotClassNames.content,\n              ...accessibility.attributes.content,\n            }),\n          })}\n          {DialogFooter.create(footer, {\n            overrideProps: {\n              content: dialogActions,\n              className: Dialog.slotClassNames.footer,\n              styles: styles.footer,\n            },\n          })}\n        </ElementType>\n      </Ref>\n    );\n\n    const triggerAccessibility: TriggerAccessibility = {\n      attributes: accessibility.attributes.trigger,\n      keyHandlers: accessibility.keyHandlers.trigger,\n    };\n\n    return (\n      <Portal\n        onTriggerClick={this.handleDialogOpen}\n        open={open}\n        trapFocus={trapFocus}\n        trigger={trigger}\n        triggerAccessibility={triggerAccessibility}\n        triggerRef={this.triggerRef}\n      >\n        <Unstable_NestingAuto>\n          {(getRefs, nestingRef) => (\n            <>\n              <Ref\n                innerRef={(contentNode: HTMLElement) => {\n                  this.overlayRef.current = contentNode;\n                  nestingRef.current = contentNode;\n                }}\n              >\n                {Box.create(overlay, {\n                  defaultProps: () => ({\n                    className: Dialog.slotClassNames.overlay,\n                    styles: styles.overlay,\n                  }),\n                  overrideProps: { content: dialogContent },\n                })}\n              </Ref>\n\n              {closeOnOutsideClick && (\n                <EventListener listener={this.handleOverlayClick} target={this.context.target} type=\"click\" capture />\n              )}\n              <EventListener\n                listener={this.handleDocumentKeydown(getRefs)}\n                target={this.context.target}\n                type=\"keydown\"\n                capture\n              />\n            </>\n          )}\n        </Unstable_NestingAuto>\n      </Portal>\n    );\n  }\n}\n\nDialog.slotClassNames = {\n  header: `${Dialog.className}__header`,\n  headerAction: `${Dialog.className}__headerAction`,\n  content: `${Dialog.className}__content`,\n  overlay: `${Dialog.className}__overlay`,\n  footer: `${Dialog.className}__footer`,\n};\n\n/**\n * A Dialog displays important information on top of a page which requires a user's attention, confirmation, or interaction.\n * Dialogs are purposefully interruptive, so they should be used sparingly.\n *\n * @accessibility\n * Implements [ARIA Dialog (Modal)](https://www.w3.org/TR/wai-aria-practices-1.1/#dialog_modal) design pattern.\n * @accessibilityIssues\n * [NVDA narrates dialog title and button twice](https://github.com/nvaccess/nvda/issues/10003)\n * [NVDA does not recognize the ARIA 1.1 values of aria-haspopup](https://github.com/nvaccess/nvda/issues/8235)\n * [Jaws does not announce token values of aria-haspopup](https://github.com/FreedomScientific/VFO-standards-support/issues/33)\n * [Issue 989517: VoiceOver narrates dialog content and button twice](https://bugs.chromium.org/p/chromium/issues/detail?id=989517)\n */\nexport default withSafeTypeForAs<typeof Dialog, DialogProps>(Dialog);\n"],"file":"Dialog.js"}