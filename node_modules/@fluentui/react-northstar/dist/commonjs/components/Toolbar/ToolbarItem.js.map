{"version":3,"sources":["components/Toolbar/ToolbarItem.tsx"],"names":["ToolbarItem","props","context","React","useContext","ThemeContext","displayName","telemetry","setStart","setEnd","accessibility","active","className","design","icon","children","disabled","popup","menu","menuOpen","wrapper","styles","variables","itemRef","useRef","menuRef","parentVariables","ToolbarVariablesContext","mergedVariables","getA11yProps","debugName","actionHandlers","performClick","event","preventDefault","handleClick","performWrapperClick","handleWrapperClick","closeMenuAndFocusTrigger","trySetMenuOpen","current","doNotNavigateNextToolbarItem","stopPropagation","mapPropsToBehavior","as","String","hasMenu","hasPopup","rtl","mapPropsToStyles","mapPropsToInlineStyles","classes","handleBlur","e","handleFocus","nativeEvent","target","handleOutsideClick","getRefs","isItemClick","isNestedClick","childRef","isInside","newValue","handleMenuOverrides","predefinedProps","onBlur","contains","relatedTarget","onItemClick","itemProps","ElementType","unhandledProps","handledProps","itemElement","root","onFocus","onClick","Box","create","submenuElement","nestingRef","node","preventOverflow","escapeWithReference","ToolbarMenu","overrideProps","popupElement","Popup","defaultProps","trapFocus","trigger","undefined","contentElement","wrapperElement","slotClassNames","refElement","toolbarItemBehavior","propTypes","commonPropTypes","createCommon","PropTypes","bool","customPropTypes","shorthandAllowingChildren","oneOfType","arrayOf","onMenuOpenChange","func","shape","never","string","Object","keys","Component","mappedProp"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEA;;AAEA;;AASA;;AAUA;;AAEA;;AACA;;AACA;;AAGA;;AA7BA;AAsGA,IAAMA,WACwF,GAAG,SAD3FA,WAC2F,CAAAC,KAAK,EAAI;AACxG,MAAMC,OAAgC,GAAGC,KAAK,CAACC,UAAN,CAAiBC,uBAAjB,CAAzC;;AADwG,sBAE3E,iCAAaL,WAAW,CAACM,WAAzB,EAAsCJ,OAAO,CAACK,SAA9C,CAF2E;AAAA,MAEhGC,QAFgG,iBAEhGA,QAFgG;AAAA,MAEtFC,MAFsF,iBAEtFA,MAFsF;;AAGxGD,EAAAA,QAAQ;AAHgG,MAMtGE,aANsG,GAmBpGT,KAnBoG,CAMtGS,aANsG;AAAA,MAOtGC,MAPsG,GAmBpGV,KAnBoG,CAOtGU,MAPsG;AAAA,MAQtGC,SARsG,GAmBpGX,KAnBoG,CAQtGW,SARsG;AAAA,MAStGC,MATsG,GAmBpGZ,KAnBoG,CAStGY,MATsG;AAAA,MAUtGC,IAVsG,GAmBpGb,KAnBoG,CAUtGa,IAVsG;AAAA,MAWtGC,QAXsG,GAmBpGd,KAnBoG,CAWtGc,QAXsG;AAAA,MAYtGC,QAZsG,GAmBpGf,KAnBoG,CAYtGe,QAZsG;AAAA,MAatGC,KAbsG,GAmBpGhB,KAnBoG,CAatGgB,KAbsG;AAAA,MActGC,IAdsG,GAmBpGjB,KAnBoG,CActGiB,IAdsG;AAAA,MAetGC,QAfsG,GAmBpGlB,KAnBoG,CAetGkB,QAfsG;AAAA,MAgBtGC,OAhBsG,GAmBpGnB,KAnBoG,CAgBtGmB,OAhBsG;AAAA,MAiBtGC,MAjBsG,GAmBpGpB,KAnBoG,CAiBtGoB,MAjBsG;AAAA,MAkBtGC,SAlBsG,GAmBpGrB,KAnBoG,CAkBtGqB,SAlBsG;AAqBxG,MAAMC,OAAO,GAAGpB,KAAK,CAACqB,MAAN,EAAhB;AACA,MAAMC,OAAO,GAAGtB,KAAK,CAACqB,MAAN,EAAhB;AAEA,MAAME,eAAe,GAAGvB,KAAK,CAACC,UAAN,CAAiBuB,gDAAjB,CAAxB;AACA,MAAMC,eAAe,GAAG,qCAAwBF,eAAxB,EAAyCJ,SAAzC,CAAxB;AAEA,MAAMO,YAAY,GAAG,qCAAiBnB,aAAjB,EAAgC;AACnDoB,IAAAA,SAAS,EAAE9B,WAAW,CAACM,WAD4B;AAEnDyB,IAAAA,cAAc,EAAE;AACdC,MAAAA,YAAY,EAAE,sBAAAC,KAAK,EAAI;AACrBA,QAAAA,KAAK,CAACC,cAAN;AACAC,QAAAA,WAAW,CAACF,KAAD,CAAX;AACD,OAJa;AAKdG,MAAAA,mBAAmB,EAAE,6BAAAH,KAAK,EAAI;AAC5BI,QAAAA,kBAAkB,CAACJ,KAAD,CAAlB;AACD,OAPa;AAQdK,MAAAA,wBAAwB,EAAE,kCAAAL,KAAK,EAAI;AACjCM,QAAAA,cAAc,CAAC,KAAD,EAAQN,KAAR,CAAd;AACA,8BAASV,OAAO,CAACiB,OAAjB,EAA0B,OAA1B;AACD,OAXa;AAYdC,MAAAA,4BAA4B,EAAE,sCAAAR,KAAK,EAAI;AACrCA,QAAAA,KAAK,CAACS,eAAN;AACD;AAda,KAFmC;AAkBnDC,IAAAA,kBAAkB,EAAE;AAAA,aAAO;AACzBC,QAAAA,EAAE,EAAEC,MAAM,CAAC5C,KAAK,CAAC2C,EAAP,CADe;AAEzB5B,QAAAA,QAAQ,EAARA,QAFyB;AAGzB8B,QAAAA,OAAO,EAAE,CAAC,CAAC5B,IAHc;AAIzB6B,QAAAA,QAAQ,EAAE,CAAC,CAAC9B,KAJa;AAKzBE,QAAAA,QAAQ,EAARA,QALyB;AAMzBR,QAAAA,MAAM,EAANA;AANyB,OAAP;AAAA,KAlB+B;AA0BnDqC,IAAAA,GAAG,EAAE9C,OAAO,CAAC8C;AA1BsC,GAAhC,CAArB;;AA3BwG,mBAuDpF,8BAAkChD,WAAW,CAACM,WAA9C,EAA2D;AAC7EM,IAAAA,SAAS,EAAEZ,WAAW,CAACY,SADsD;AAE7EqC,IAAAA,gBAAgB,EAAE;AAAA,aAAO;AAAEtC,QAAAA,MAAM,EAANA,MAAF;AAAUK,QAAAA,QAAQ,EAARA;AAAV,OAAP;AAAA,KAF2D;AAG7EkC,IAAAA,sBAAsB,EAAE;AAAA,aAAO;AAC7BtC,QAAAA,SAAS,EAATA,SAD6B;AAE7BC,QAAAA,MAAM,EAANA,MAF6B;AAG7BQ,QAAAA,MAAM,EAANA,MAH6B;AAI7BC,QAAAA,SAAS,EAAEM;AAJkB,OAAP;AAAA,KAHqD;AAS7EoB,IAAAA,GAAG,EAAE9C,OAAO,CAAC8C;AATgE,GAA3D,CAvDoF;AAAA,MAuDhGG,OAvDgG,cAuDhGA,OAvDgG;;AAmExG,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,CAAD,EAA6B;AAC9C,0BAASpD,KAAT,EAAgB,QAAhB,EAA0BoD,CAA1B,EAA6BpD,KAA7B;AACD,GAFD;;AAIA,MAAMqD,WAAW,GAAG,SAAdA,WAAc,CAACD,CAAD,EAA6B;AAC/C,0BAASpD,KAAT,EAAgB,SAAhB,EAA2BoD,CAA3B,EAA8BpD,KAA9B;AACD,GAFD;;AAIA,MAAMkC,WAAW,GAAG,SAAdA,WAAc,CAACkB,CAAD,EAA+C;AACjE,QAAIrC,QAAJ,EAAc;AACZqC,MAAAA,CAAC,CAACnB,cAAF;AACA;AACD;;AAED,QAAIhB,IAAJ,EAAU;AACRqB,MAAAA,cAAc,CAAC,CAACpB,QAAF,EAAYkC,CAAZ,CAAd;AACD;;AAED,0BAASpD,KAAT,EAAgB,SAAhB,EAA2BoD,CAA3B,EAA8BpD,KAA9B;AACD,GAXD;;AAaA,MAAMoC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACgB,CAAD,EAA+C;AACxE,QAAInC,IAAJ,EAAU;AACR,UAAI,iCAAqBO,OAAO,CAACe,OAA7B,EAAsCa,CAAC,CAACE,WAAxC,EAAmErD,OAAO,CAACsD,MAA3E,CAAJ,EAAwF;AACtFjB,QAAAA,cAAc,CAAC,KAAD,EAAQc,CAAR,CAAd;AACD;AACF;AACF,GAND;;AAQA,MAAMI,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,OAAD;AAAA,WAAsB,UAACL,CAAD,EAAmB;AAClE,UAAMM,WAAW,GAAG,iCAAqBpC,OAAO,CAACiB,OAA7B,EAAsCa,CAAtC,EAAyCnD,OAAO,CAACsD,MAAjD,CAApB;AACA,UAAMI,aAAa,GAAG,oBAAOF,OAAO,EAAd,EAAkB,UAACG,QAAD,EAAuB;AAC7D,eAAO,iCAAqBA,QAAQ,CAACrB,OAA9B,EAAsDa,CAAtD,EAAyDnD,OAAO,CAACsD,MAAjE,CAAP;AACD,OAFqB,CAAtB;AAGA,UAAMM,QAAQ,GAAGH,WAAW,IAAIC,aAAhC;;AAEA,UAAI,CAACE,QAAL,EAAe;AACbvB,QAAAA,cAAc,CAAC,KAAD,EAAQc,CAAR,CAAd;AACD;AACF,KAV0B;AAAA,GAA3B;;AAYA,MAAMd,cAAc,GAAG,SAAjBA,cAAiB,CAACwB,QAAD,EAAoBV,CAApB,EAAwD;AAC7E,0BAASpD,KAAT,EAAgB,kBAAhB,EAAoCoD,CAApC,oBAA4CpD,KAA5C;AAAmDkB,MAAAA,QAAQ,EAAE4C;AAA7D;AACD,GAFD;;AAIA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACN,OAAD;AAAA,WAAsB,UAACO,eAAD;AAAA,aAAwC;AACxFC,QAAAA,MAAM,EAAE,gBAACb,CAAD,EAAyB;AAC/B,cAAMS,QAAQ,GAAG,oBAAOJ,OAAO,EAAd,EAAkB,UAACG,QAAD,EAAuB;AACxD,mBAAOA,QAAQ,CAACrB,OAAT,CAAiB2B,QAAjB,CAA0Bd,CAAC,CAACe,aAA5B,CAAP;AACD,WAFgB,CAAjB;;AAIA,cAAI,CAACN,QAAL,EAAe;AACbvB,YAAAA,cAAc,CAAC,KAAD,EAAQc,CAAR,CAAd;AACD;AACF,SATuF;AAUxFgB,QAAAA,WAAW,EAAE,qBAAChB,CAAD,EAAIiB,SAAJ,EAAwC;AAAA,cAC3CrD,KAD2C,GACvBqD,SADuB,CAC3CrD,KAD2C;AAAA,cACpCE,QADoC,GACvBmD,SADuB,CACpCnD,QADoC;AAEnD,gCAAS8C,eAAT,EAA0B,aAA1B,EAAyCZ,CAAzC,EAA4CiB,SAA5C;;AACA,cAAIrD,KAAJ,EAAW;AACT;AACD,WALkD,CAMnD;;;AACAsB,UAAAA,cAAc,CAACpB,QAAD,EAAWkC,CAAX,CAAd;AACD;AAlBuF,OAAxC;AAAA,KAAtB;AAAA,GAA5B;;AAqBA,MAAMkB,WAAW,GAAG,mCAAetE,KAAf,CAApB;AACA,MAAMuE,cAAc,GAAG,sCAAkBxE,WAAW,CAACyE,YAA9B,EAA4CxE,KAA5C,CAAvB;AAEA,MAAMyE,WAAW,GACf,oBAAC,WAAD,EACM7C,YAAY,CAAC,MAAD,oBACX2C,cADW;AAEdxD,IAAAA,QAAQ,EAARA,QAFc;AAGdJ,IAAAA,SAAS,EAAEuC,OAAO,CAACwB,IAHL;AAIdT,IAAAA,MAAM,EAAEd,UAJM;AAKdwB,IAAAA,OAAO,EAAEtB,WALK;AAMduB,IAAAA,OAAO,EAAE1C;AANK,KADlB,EAUG,0BAAcpB,QAAd,IAA0BA,QAA1B,GAAqC+D,aAAIC,MAAJ,CAAWjE,IAAX,CAVxC,CADF;AAeA,MAAMkE,cAAc,GAAG7D,QAAQ,GAC7B,oBAAC,mDAAD,QACG,UAACuC,OAAD,EAAUuB,UAAV;AAAA,WACC,0CACE,oBAAC,sBAAD;AACE,MAAA,QAAQ,EAAE,kBAACC,IAAD,EAAuB;AAC/BD,QAAAA,UAAU,CAACzC,OAAX,GAAqB0C,IAArB;AACAzD,QAAAA,OAAO,CAACe,OAAR,GAAkB0C,IAAlB;AACD;AAJH,OAME,oBAAC,kBAAD;AACE,MAAA,KAAK,EAAC,OADR;AAEE,MAAA,QAAQ,EAAC,OAFX;AAGE,MAAA,SAAS,EAAE;AACTC,QAAAA,eAAe,EAAE;AACfC,UAAAA,mBAAmB,EAAE,KADN,CACa;;AADb;AADR,OAHb;AAQE,MAAA,SAAS,EAAE7D;AARb,OASM,6CAA4BL,IAA5B,CATN,GAWE,oBAAC,iDAAD;AAA0B,MAAA,KAAK,EAAEU;AAAjC,OACGyD,qBAAYN,MAAZ,CAAmB7D,IAAnB,EAAyB;AACxBoE,MAAAA,aAAa,EAAEtB,mBAAmB,CAACN,OAAD;AADV,KAAzB,CADH,CAXF,CANF,CADF,EAyBE,oBAAC,0CAAD;AAAe,MAAA,QAAQ,EAAED,kBAAkB,CAACC,OAAD,CAA3C;AAAsD,MAAA,MAAM,EAAExD,OAAO,CAACsD,MAAtE;AAA8E,MAAA,IAAI,EAAC,OAAnF;AAA2F,MAAA,OAAO;AAAlG,MAzBF,CADD;AAAA,GADH,CAD6B,GAgC3B,IAhCJ;;AAkCA,MAAIvC,KAAJ,EAAW;AACT,QAAMsE,YAAY,GAAGC,eAAMT,MAAN,CAAa9D,KAAb,EAAoB;AACvCwE,MAAAA,YAAY,EAAE;AAAA,eAAO;AACnBC,UAAAA,SAAS,EAAE;AADQ,SAAP;AAAA,OADyB;AAIvCJ,MAAAA,aAAa,EAAE;AACbK,QAAAA,OAAO,EAAEjB,WADI;AAEb3D,QAAAA,QAAQ,EAAE6E,SAFG,CAEQ;;AAFR;AAJwB,KAApB,CAArB;;AASAnF,IAAAA,MAAM;AAEN,WAAO8E,YAAP;AACD,GAtMuG,CAwMxG;;;AACA,MAAIrE,IAAJ,EAAU;AACR,QAAM2E,cAAc,GAClB,0CACE,oBAAC,sBAAD;AAAK,MAAA,QAAQ,EAAEtE;AAAf,OAAyBmD,WAAzB,CADF,EAEGM,cAFH,CADF;;AAOA,QAAI5D,OAAJ,EAAa;AACX,UAAM0E,cAAc,GAAGhB,aAAIC,MAAJ,CAAW3D,OAAX,EAAoB;AACzCqE,QAAAA,YAAY,EAAE;AAAA,iBACZ5D,YAAY,CAAC,SAAD,EAAY;AACtBjB,YAAAA,SAAS,EAAE,yBAAGZ,WAAW,CAAC+F,cAAZ,CAA2B3E,OAA9B,EAAuC+B,OAAO,CAAC/B,OAA/C;AADW,WAAZ,CADA;AAAA,SAD2B;AAKzCkE,QAAAA,aAAa,EAAE,uBAAArB,eAAe;AAAA,iBAAK;AACjClD,YAAAA,QAAQ,EAAE8E,cADuB;AAEjChB,YAAAA,OAAO,EAAE,iBAAAxB,CAAC,EAAI;AACZhB,cAAAA,kBAAkB,CAACgB,CAAD,CAAlB;AACA,oCAASY,eAAT,EAA0B,SAA1B,EAAqCZ,CAArC;AACD;AALgC,WAAL;AAAA;AALW,OAApB,CAAvB;;AAaA5C,MAAAA,MAAM;AAEN,aAAOqF,cAAP;AACD;;AAEDrF,IAAAA,MAAM;AACN,WAAOoF,cAAP;AACD;;AAED,MAAMG,UAAU,GAAG,oBAAC,sBAAD;AAAK,IAAA,QAAQ,EAAEzE;AAAf,KAAyBmD,WAAzB,CAAnB;AACAjE,EAAAA,MAAM;AAEN,SAAOuF,UAAP;AACD,CA7OD;;AA+OAhG,WAAW,CAACY,SAAZ,GAAwB,kBAAxB;AACAZ,WAAW,CAACM,WAAZ,GAA0B,aAA1B;AAEAN,WAAW,CAAC+F,cAAZ,GAA6B;AAC3B3E,EAAAA,OAAO,YAAKpB,WAAW,CAACY,SAAjB;AADoB,CAA7B;AAIAZ,WAAW,CAACyF,YAAZ,GAA2B;AACzB7C,EAAAA,EAAE,EAAE,QADqB;AAEzBlC,EAAAA,aAAa,EAAEuF,kCAFU;AAGzB7E,EAAAA,OAAO,EAAE;AAHgB,CAA3B;AAKApB,WAAW,CAACkG,SAAZ,qBACKC,uBAAgBC,YAAhB,EADL;AAEEzF,EAAAA,MAAM,EAAE0F,SAAS,CAACC,IAFpB;AAGEtF,EAAAA,QAAQ,EAAEqF,SAAS,CAACC,IAHtB;AAIExF,EAAAA,IAAI,EAAEyF,eAAe,CAACC,yBAJxB;AAKEtF,EAAAA,IAAI,EAAEmF,SAAS,CAACI,SAAV,CAAoB,CACxBF,eAAe,CAACC,yBADQ,EAExBH,SAAS,CAACK,OAAV,CAAkBH,eAAe,CAACC,yBAAlC,CAFwB,CAApB,CALR;AASErF,EAAAA,QAAQ,EAAEkF,SAAS,CAACC,IATtB;AAUEK,EAAAA,gBAAgB,EAAEN,SAAS,CAACO,IAV9B;AAWE/B,EAAAA,OAAO,EAAEwB,SAAS,CAACO,IAXrB;AAYEhC,EAAAA,OAAO,EAAEyB,SAAS,CAACO,IAZrB;AAaE1C,EAAAA,MAAM,EAAEmC,SAAS,CAACO,IAbpB;AAcE3F,EAAAA,KAAK,EAAEoF,SAAS,CAACI,SAAV,CAAoB,CACzBJ,SAAS,CAACQ,KAAV,mBACKrB,eAAMU,SADX;AAEEP,IAAAA,OAAO,EAAEY,eAAe,CAACO,KAF3B;AAGE/F,IAAAA,QAAQ,EAAEwF,eAAe,CAACO;AAH5B,KADyB,EAMzBT,SAAS,CAACU,MANe,CAApB,CAdT;AAsBE3F,EAAAA,OAAO,EAAEmF,eAAe,CAACC;AAtB3B;AAwBAxG,WAAW,CAACyE,YAAZ,GAA2BuC,MAAM,CAACC,IAAP,CAAYjH,WAAW,CAACkG,SAAxB,CAA3B;AAEAlG,WAAW,CAAC+E,MAAZ,GAAqB,mCAAuB;AAAEmC,EAAAA,SAAS,EAAElH,WAAb;AAA0BmH,EAAAA,UAAU,EAAE;AAAtC,CAAvB,CAArB;AAEA;;;;eAGe,8BAAkEnH,WAAlE,C","sourcesContent":["import { Accessibility, toolbarItemBehavior, ToolbarItemBehaviorProps } from '@fluentui/accessibility';\nimport { getElementType, useUnhandledProps, useAccessibility, useStyles, useTelemetry } from '@fluentui/react-bindings';\nimport { Ref } from '@fluentui/react-component-ref';\nimport { EventListener } from '@fluentui/react-component-event-listener';\nimport { GetRefs, NodeRef, Unstable_NestingAuto } from '@fluentui/react-component-nesting-registry';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport { mergeComponentVariables } from '@fluentui/styles';\nimport cx from 'classnames';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n// @ts-ignore\nimport { ThemeContext } from 'react-fela';\n\nimport {\n  createShorthandFactory,\n  doesNodeContainClick,\n  UIComponentProps,\n  ChildrenComponentProps,\n  ContentComponentProps,\n  commonPropTypes,\n  childrenExist,\n} from '../../utils';\nimport {\n  ComponentEventHandler,\n  ShorthandValue,\n  WithAsProp,\n  withSafeTypeForAs,\n  Omit,\n  ShorthandCollection,\n  FluentComponentStaticProps,\n  ProviderContextPrepared,\n} from '../../types';\nimport { getPopperPropsFromShorthand, Popper, PopperShorthandProps } from '../../utils/positioner';\n\nimport ToolbarMenu, { ToolbarMenuProps } from './ToolbarMenu';\nimport Box, { BoxProps } from '../Box/Box';\nimport Popup, { PopupProps } from '../Popup/Popup';\nimport { ToolbarMenuItemProps } from '../Toolbar/ToolbarMenuItem';\nimport { ToolbarItemShorthandKinds } from './Toolbar';\nimport { ToolbarVariablesContext, ToolbarVariablesProvider } from './toolbarVariablesContext';\n\nexport interface ToolbarItemProps extends UIComponentProps, ChildrenComponentProps, ContentComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<ToolbarItemBehaviorProps>;\n\n  /** A toolbar item can be active. */\n  active?: boolean;\n\n  /** A toolbar item can show it is currently unable to be interacted with. */\n  disabled?: boolean;\n\n  /** Name or shorthand for Toolbar Item Icon */\n  icon?: ShorthandValue<BoxProps>;\n\n  /**\n   * Shorthand for the submenu.\n   * If submenu is specified, the item is wrapped to group the item and the menu elements together.\n   */\n  menu?:\n    | ShorthandValue<ToolbarMenuProps & { popper?: PopperShorthandProps }>\n    | ShorthandCollection<ToolbarMenuItemProps, ToolbarItemShorthandKinds>;\n\n  /** Indicates if the menu inside the item is open. */\n  menuOpen?: boolean;\n\n  /**\n   * Event for request to change 'menuOpen' value.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onMenuOpenChange?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Called on click.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onClick?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Called after user's focus.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onFocus?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Called after item blur.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onBlur?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Attaches a `Popup` component to the ToolbarItem.\n   * Accepts all props as a `Popup`, except `trigger` and `children`.\n   * Traps focus by default.\n   * @see PopupProps\n   */\n  popup?: Omit<PopupProps, 'trigger' | 'children'> | string;\n\n  /** Shorthand for the wrapper component. The item is wrapped only if it contains a menu! */\n  wrapper?: ShorthandValue<BoxProps>;\n}\n\nexport type ToolbarItemStylesProps = Required<Pick<ToolbarItemProps, 'active' | 'disabled'>>;\n\nexport interface ToolbarItemSlotClassNames {\n  wrapper: string;\n}\n\nconst ToolbarItem: React.FC<WithAsProp<ToolbarItemProps>> &\n  FluentComponentStaticProps<ToolbarItemProps> & { slotClassNames: ToolbarItemSlotClassNames } = props => {\n  const context: ProviderContextPrepared = React.useContext(ThemeContext);\n  const { setStart, setEnd } = useTelemetry(ToolbarItem.displayName, context.telemetry);\n  setStart();\n\n  const {\n    accessibility,\n    active,\n    className,\n    design,\n    icon,\n    children,\n    disabled,\n    popup,\n    menu,\n    menuOpen,\n    wrapper,\n    styles,\n    variables,\n  } = props;\n\n  const itemRef = React.useRef<HTMLElement>();\n  const menuRef = React.useRef<HTMLElement>();\n\n  const parentVariables = React.useContext(ToolbarVariablesContext);\n  const mergedVariables = mergeComponentVariables(parentVariables, variables);\n\n  const getA11yProps = useAccessibility(accessibility, {\n    debugName: ToolbarItem.displayName,\n    actionHandlers: {\n      performClick: event => {\n        event.preventDefault();\n        handleClick(event);\n      },\n      performWrapperClick: event => {\n        handleWrapperClick(event);\n      },\n      closeMenuAndFocusTrigger: event => {\n        trySetMenuOpen(false, event);\n        _.invoke(itemRef.current, 'focus');\n      },\n      doNotNavigateNextToolbarItem: event => {\n        event.stopPropagation();\n      },\n    },\n    mapPropsToBehavior: () => ({\n      as: String(props.as),\n      disabled,\n      hasMenu: !!menu,\n      hasPopup: !!popup,\n      menuOpen,\n      active,\n    }),\n    rtl: context.rtl,\n  });\n  const { classes } = useStyles<ToolbarItemStylesProps>(ToolbarItem.displayName, {\n    className: ToolbarItem.className,\n    mapPropsToStyles: () => ({ active, disabled }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables: mergedVariables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const handleBlur = (e: React.SyntheticEvent) => {\n    _.invoke(props, 'onBlur', e, props);\n  };\n\n  const handleFocus = (e: React.SyntheticEvent) => {\n    _.invoke(props, 'onFocus', e, props);\n  };\n\n  const handleClick = (e: React.MouseEvent | React.KeyboardEvent) => {\n    if (disabled) {\n      e.preventDefault();\n      return;\n    }\n\n    if (menu) {\n      trySetMenuOpen(!menuOpen, e);\n    }\n\n    _.invoke(props, 'onClick', e, props);\n  };\n\n  const handleWrapperClick = (e: React.MouseEvent | React.KeyboardEvent) => {\n    if (menu) {\n      if (doesNodeContainClick(menuRef.current, e.nativeEvent as MouseEvent, context.target)) {\n        trySetMenuOpen(false, e);\n      }\n    }\n  };\n\n  const handleOutsideClick = (getRefs: GetRefs) => (e: MouseEvent) => {\n    const isItemClick = doesNodeContainClick(itemRef.current, e, context.target);\n    const isNestedClick = _.some(getRefs(), (childRef: NodeRef) => {\n      return doesNodeContainClick(childRef.current as HTMLElement, e, context.target);\n    });\n    const isInside = isItemClick || isNestedClick;\n\n    if (!isInside) {\n      trySetMenuOpen(false, e);\n    }\n  };\n\n  const trySetMenuOpen = (newValue: boolean, e: Event | React.SyntheticEvent) => {\n    _.invoke(props, 'onMenuOpenChange', e, { ...props, menuOpen: newValue });\n  };\n\n  const handleMenuOverrides = (getRefs: GetRefs) => (predefinedProps: ToolbarMenuProps) => ({\n    onBlur: (e: React.FocusEvent) => {\n      const isInside = _.some(getRefs(), (childRef: NodeRef) => {\n        return childRef.current.contains(e.relatedTarget as HTMLElement);\n      });\n\n      if (!isInside) {\n        trySetMenuOpen(false, e);\n      }\n    },\n    onItemClick: (e, itemProps: ToolbarMenuItemProps) => {\n      const { popup, menuOpen } = itemProps;\n      _.invoke(predefinedProps, 'onItemClick', e, itemProps);\n      if (popup) {\n        return;\n      }\n      // TODO: should we pass toolbarMenuItem to the user callback so he can decide if he wants to close the menu?\n      trySetMenuOpen(menuOpen, e);\n    },\n  });\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(ToolbarItem.handledProps, props);\n\n  const itemElement = (\n    <ElementType\n      {...getA11yProps('root', {\n        ...unhandledProps,\n        disabled,\n        className: classes.root,\n        onBlur: handleBlur,\n        onFocus: handleFocus,\n        onClick: handleClick,\n      })}\n    >\n      {childrenExist(children) ? children : Box.create(icon)}\n    </ElementType>\n  );\n\n  const submenuElement = menuOpen ? (\n    <Unstable_NestingAuto>\n      {(getRefs, nestingRef) => (\n        <>\n          <Ref\n            innerRef={(node: HTMLElement) => {\n              nestingRef.current = node;\n              menuRef.current = node;\n            }}\n          >\n            <Popper\n              align=\"start\"\n              position=\"above\"\n              modifiers={{\n                preventOverflow: {\n                  escapeWithReference: false, // escapeWithReference breaks positioning of ToolbarMenu in overflow mode because Popper components sets modifiers on scrollable container\n                },\n              }}\n              targetRef={itemRef}\n              {...getPopperPropsFromShorthand(menu)}\n            >\n              <ToolbarVariablesProvider value={mergedVariables}>\n                {ToolbarMenu.create(menu, {\n                  overrideProps: handleMenuOverrides(getRefs),\n                })}\n              </ToolbarVariablesProvider>\n            </Popper>\n          </Ref>\n          <EventListener listener={handleOutsideClick(getRefs)} target={context.target} type=\"click\" capture />\n        </>\n      )}\n    </Unstable_NestingAuto>\n  ) : null;\n\n  if (popup) {\n    const popupElement = Popup.create(popup, {\n      defaultProps: () => ({\n        trapFocus: true,\n      }),\n      overrideProps: {\n        trigger: itemElement,\n        children: undefined, // force-reset `children` defined for `Popup` as it collides with the `trigger`\n      },\n    });\n    setEnd();\n\n    return popupElement;\n  }\n\n  // wrap the item if it has menu (even if it is closed = not rendered)\n  if (menu) {\n    const contentElement = (\n      <>\n        <Ref innerRef={itemRef}>{itemElement}</Ref>\n        {submenuElement}\n      </>\n    );\n\n    if (wrapper) {\n      const wrapperElement = Box.create(wrapper, {\n        defaultProps: () =>\n          getA11yProps('wrapper', {\n            className: cx(ToolbarItem.slotClassNames.wrapper, classes.wrapper),\n          }),\n        overrideProps: predefinedProps => ({\n          children: contentElement,\n          onClick: e => {\n            handleWrapperClick(e);\n            _.invoke(predefinedProps, 'onClick', e);\n          },\n        }),\n      });\n      setEnd();\n\n      return wrapperElement;\n    }\n\n    setEnd();\n    return contentElement;\n  }\n\n  const refElement = <Ref innerRef={itemRef}>{itemElement}</Ref>;\n  setEnd();\n\n  return refElement;\n};\n\nToolbarItem.className = 'ui-toolbar__item';\nToolbarItem.displayName = 'ToolbarItem';\n\nToolbarItem.slotClassNames = {\n  wrapper: `${ToolbarItem.className}__wrapper`,\n};\n\nToolbarItem.defaultProps = {\n  as: 'button',\n  accessibility: toolbarItemBehavior,\n  wrapper: {},\n};\nToolbarItem.propTypes = {\n  ...commonPropTypes.createCommon(),\n  active: PropTypes.bool,\n  disabled: PropTypes.bool,\n  icon: customPropTypes.shorthandAllowingChildren,\n  menu: PropTypes.oneOfType([\n    customPropTypes.shorthandAllowingChildren,\n    PropTypes.arrayOf(customPropTypes.shorthandAllowingChildren),\n  ]),\n  menuOpen: PropTypes.bool,\n  onMenuOpenChange: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  popup: PropTypes.oneOfType([\n    PropTypes.shape({\n      ...Popup.propTypes,\n      trigger: customPropTypes.never,\n      children: customPropTypes.never,\n    }),\n    PropTypes.string,\n  ]),\n  wrapper: customPropTypes.shorthandAllowingChildren,\n};\nToolbarItem.handledProps = Object.keys(ToolbarItem.propTypes) as any;\n\nToolbarItem.create = createShorthandFactory({ Component: ToolbarItem, mappedProp: 'content' });\n\n/**\n * A ToolbarItem renders Toolbar item as a button with an icon.\n */\nexport default withSafeTypeForAs<typeof ToolbarItem, ToolbarItemProps, 'button'>(ToolbarItem);\n"],"file":"ToolbarItem.js"}