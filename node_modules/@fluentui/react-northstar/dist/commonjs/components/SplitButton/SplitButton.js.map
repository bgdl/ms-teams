{"version":3,"sources":["components/SplitButton/SplitButton.tsx"],"names":["SplitButton","React","createRef","predefinedProps","onMenuItemClick","e","menuItemProps","setState","open","props","onOpenChange","popupProps","stopPropagation","onClick","buttonProps","onFocus","isFromKeyboard","ElementType","classes","accessibility","styles","unhandledProps","button","disabled","menu","primary","secondary","toggleButton","size","position","align","flipBoundary","overflowBoundary","positionFixed","offset","unstable_pinned","trigger","Button","create","defaultProps","menuButton","overrideProps","handleMenuButtonTriggerOverrides","targetRef","root","attributes","MenuButton","childBehaviors","undefined","on","state","target","current","handleMenuButtonOverrides","SplitButtonToggle","AutoControlledComponent","commonPropTypes","createCommon","content","customPropTypes","itemShorthand","defaultOpen","PropTypes","bool","oneOfType","arrayOf","itemShorthandWithoutJSX","onMainButtonClick","func","every","disallow","oneOf","POSITIONS","ALIGNMENTS","object","string","splitButtonBehavior"],"mappings":"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","sourcesContent":["import { Accessibility, splitButtonBehavior } from '@fluentui/accessibility';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport * as _ from 'lodash';\nimport { ALIGNMENTS, POSITIONS } from '../../utils/positioner';\nimport { WithAsProp, withSafeTypeForAs, ComponentEventHandler, ShorthandValue, ShorthandCollection } from '../../types';\nimport {\n  UIComponentProps,\n  ChildrenComponentProps,\n  ContentComponentProps,\n  isFromKeyboard,\n  commonPropTypes,\n  AutoControlledComponent,\n  RenderResultConfig,\n  ShorthandFactory,\n  SizeValue,\n} from '../../utils';\nimport SplitButtonToggle, { SplitButtonToggleProps } from './SplitButtonToggle';\nimport Button, { ButtonProps } from '../Button/Button';\nimport MenuButton, { MenuButtonProps } from '../MenuButton/MenuButton';\nimport { MenuProps } from '../Menu/Menu';\nimport { MenuItemProps } from '../Menu/MenuItem';\nimport { PopupProps } from '../Popup/Popup';\nimport { Ref } from '@fluentui/react-component-ref';\nimport { PositioningProps } from '../../utils/positioner/types';\n\nexport interface SplitButtonProps\n  extends UIComponentProps,\n    ChildrenComponentProps,\n    ContentComponentProps,\n    PositioningProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   */\n  accessibility?: Accessibility;\n\n  /** Shorthand for the main button. */\n  button?: ShorthandValue<ButtonProps>;\n\n  /** Initial value for 'open'. */\n  defaultOpen?: boolean;\n\n  /** A split button can be disabled. */\n  disabled?: boolean;\n\n  /** Shorthand for the menu. */\n  menu?: ShorthandValue<MenuProps> | ShorthandCollection<MenuItemProps>;\n\n  /**\n   * Called after user's click on the main button.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onMainButtonClick?: ComponentEventHandler<ButtonProps>;\n\n  /**\n   * Called after user's click on a menu item.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onMenuItemClick?: ComponentEventHandler<MenuItemProps>;\n\n  /**\n   * Event for request to change 'open' value.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onOpenChange?: ComponentEventHandler<SplitButtonProps>;\n\n  /** Defines whether menu is displayed. */\n  open?: boolean;\n\n  /** A split button can be formatted to show different levels of emphasis. */\n  primary?: boolean;\n\n  /** A split button can be formatted to show different levels of emphasis. */\n  secondary?: boolean;\n\n  /** A split button can be sized */\n  size?: SizeValue;\n\n  /** Shorthand for the toggle button. */\n  toggleButton?: ShorthandValue<SplitButtonToggleProps>;\n}\n\nexport interface SplitButtonState {\n  isFromKeyboard: boolean;\n  open: boolean;\n}\n\nclass SplitButton extends AutoControlledComponent<WithAsProp<SplitButtonProps>, SplitButtonState> {\n  static create: ShorthandFactory<SplitButton>;\n\n  static displayName = 'SplitButton';\n\n  static Toggle = SplitButtonToggle;\n\n  static className = 'ui-splitbutton';\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      content: false,\n    }),\n    button: customPropTypes.itemShorthand,\n    defaultOpen: PropTypes.bool,\n    menu: PropTypes.oneOfType([\n      customPropTypes.itemShorthand,\n      PropTypes.arrayOf(customPropTypes.itemShorthandWithoutJSX),\n    ]),\n    onMainButtonClick: PropTypes.func,\n    onMenuItemClick: PropTypes.func,\n    onOpenChange: PropTypes.func,\n    open: PropTypes.bool,\n    size: customPropTypes.size,\n    primary: customPropTypes.every([customPropTypes.disallow(['secondary']), PropTypes.bool]),\n    secondary: customPropTypes.every([customPropTypes.disallow(['primary']), PropTypes.bool]),\n    toggleButton: customPropTypes.itemShorthand,\n    position: PropTypes.oneOf(POSITIONS),\n    align: PropTypes.oneOf(ALIGNMENTS),\n    flipBoundary: PropTypes.oneOfType([\n      PropTypes.object as PropTypes.Requireable<Element>,\n      PropTypes.oneOf<'scrollParent' | 'window' | 'viewport'>(['scrollParent', 'window', 'viewport']),\n    ]),\n    overflowBoundary: PropTypes.oneOfType([\n      PropTypes.object as PropTypes.Requireable<Element>,\n      PropTypes.oneOf<'scrollParent' | 'window' | 'viewport'>(['scrollParent', 'window', 'viewport']),\n    ]),\n    positionFixed: PropTypes.bool,\n    offset: PropTypes.string,\n    unstable_pinned: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    accessibility: splitButtonBehavior,\n    toggleButton: {},\n    position: 'below',\n    align: 'start',\n  };\n\n  static autoControlledProps = ['open'];\n\n  targetRef = React.createRef<HTMLDivElement>();\n\n  getInitialAutoControlledState(): SplitButtonState {\n    return {\n      isFromKeyboard: false,\n      open: false,\n    };\n  }\n\n  handleMenuButtonOverrides = (predefinedProps: MenuButtonProps) => ({\n    onMenuItemClick: (e: React.SyntheticEvent, menuItemProps: MenuItemProps) => {\n      this.setState({ open: false });\n      _.invoke(this.props, 'onOpenChange', e, { ...this.props, open: false });\n\n      _.invoke(predefinedProps, 'onMenuItemClick', e, menuItemProps);\n      _.invoke(this.props, 'onMenuItemClick', e, menuItemProps);\n    },\n    onOpenChange: (e: React.SyntheticEvent, popupProps: PopupProps) => {\n      e.stopPropagation();\n      this.setState({ open: popupProps.open });\n      _.invoke(this.props, 'onOpenChange', e, { ...this.props, open: popupProps.open });\n    },\n  });\n\n  handleMenuButtonTriggerOverrides = (predefinedProps: ButtonProps) => ({\n    onClick: (e: React.SyntheticEvent, buttonProps: ButtonProps) => {\n      _.invoke(predefinedProps, 'onClick', e, buttonProps);\n      _.invoke(this.props, 'onMainButtonClick', e, buttonProps);\n    },\n    onFocus: (e: React.SyntheticEvent, buttonProps: ButtonProps) => {\n      _.invoke(predefinedProps, 'onFocus', e, buttonProps);\n      this.setState({ isFromKeyboard: isFromKeyboard() });\n    },\n  });\n\n  renderComponent({\n    ElementType,\n    classes,\n    accessibility,\n    styles,\n    unhandledProps,\n  }: RenderResultConfig<MenuButtonProps>): React.ReactNode {\n    const {\n      button,\n      disabled,\n      menu,\n      primary,\n      secondary,\n      toggleButton,\n      size,\n      position,\n      align,\n      flipBoundary,\n      overflowBoundary,\n      positionFixed,\n      offset,\n      unstable_pinned,\n    } = this.props;\n    const trigger = Button.create(button, {\n      defaultProps: () => ({\n        styles: styles.menuButton,\n        primary,\n        secondary,\n        disabled,\n      }),\n      overrideProps: this.handleMenuButtonTriggerOverrides,\n    });\n\n    return (\n      <Ref innerRef={this.targetRef}>\n        <ElementType className={classes.root} {...accessibility.attributes.root} {...unhandledProps}>\n          {MenuButton.create(\n            {},\n            {\n              defaultProps: () => ({\n                accessibility: accessibility.childBehaviors ? accessibility.childBehaviors.menuButton : undefined,\n                menu,\n                // Opening is handled manually.\n                on: [],\n                open: this.state.open,\n                trigger,\n                target: this.targetRef.current,\n                position,\n                align,\n                flipBoundary,\n                overflowBoundary,\n                positionFixed,\n                offset,\n                unstable_pinned,\n              }),\n              overrideProps: this.handleMenuButtonOverrides,\n            },\n          )}\n\n          {SplitButtonToggle.create(toggleButton, {\n            defaultProps: () => ({\n              disabled,\n              primary,\n              secondary,\n              size,\n              ...accessibility.attributes.toggleButton,\n            }),\n            overrideProps: (predefinedProps: ButtonProps) => ({\n              onClick: (e: React.SyntheticEvent, buttonProps: ButtonProps) => {\n                _.invoke(predefinedProps, 'onClick', e, buttonProps);\n\n                this.setState(state => {\n                  const open = !state.open;\n                  _.invoke(this.props, 'onOpenChange', e, { ...this.props, open });\n                  return { open };\n                });\n              },\n            }),\n          })}\n        </ElementType>\n      </Ref>\n    );\n  }\n}\n\n/**\n * A SplitButton enables users to take one of several related actions, one being dominant and rest being displayed in a menu.\n */\nexport default withSafeTypeForAs<typeof SplitButton, SplitButtonProps>(SplitButton);\n"],"file":"SplitButton.js"}