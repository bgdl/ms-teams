{"version":3,"sources":["components/Dropdown/DropdownSelectedItem.tsx"],"names":["DropdownSelectedItem","React","createRef","e","props","predefinedProps","onClick","iconProps","stopPropagation","onKeyDown","keyboardKey","getCode","Enter","prevProps","active","itemRef","current","focus","unhandledProps","classes","styles","header","icon","image","contentElement","Box","create","defaultProps","as","className","slotClassNames","name","children","ComponentType","overrideProps","handleIconOverrides","imageProps","Image","avatar","root","handleClick","handleKeyDown","UIComponent","commonPropTypes","createCommon","accessibility","PropTypes","bool","customPropTypes","itemShorthand","shorthandAllowingChildren","itemShorthandWithoutJSX","func","onRemove","Component","mappedProp"],"mappings":"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","sourcesContent":["import { Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\nimport { CloseIcon } from '@fluentui/react-icons-northstar';\n\nimport keyboardKey from 'keyboard-key';\nimport {\n  ComponentEventHandler,\n  ShorthandValue,\n  WithAsProp,\n  ComponentKeyboardEventHandler,\n  withSafeTypeForAs,\n} from '../../types';\nimport { UIComponentProps } from '../../utils/commonPropInterfaces';\nimport {\n  createShorthandFactory,\n  UIComponent,\n  RenderResultConfig,\n  commonPropTypes,\n  ShorthandFactory,\n} from '../../utils';\nimport Image, { ImageProps } from '../Image/Image';\nimport Label from '../Label/Label';\nimport Box, { BoxProps } from '../Box/Box';\n\nexport interface DropdownSelectedItemSlotClassNames {\n  header: string;\n  icon: string;\n  image: string;\n}\n\nexport interface DropdownSelectedItemProps extends UIComponentProps<DropdownSelectedItemProps> {\n  /** A selected item can be active. */\n  active?: boolean;\n\n  /** Header of the selected item. */\n  header?: ShorthandValue<BoxProps>;\n\n  /** Icon of the selected item. */\n  icon?: ShorthandValue<BoxProps>;\n\n  /** Image of the selected item. */\n  image?: ShorthandValue<ImageProps>;\n\n  /**\n   * Called on selected item click.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onClick?: ComponentEventHandler<DropdownSelectedItemProps>;\n\n  /**\n   * Called on selected item key down.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onKeyDown?: ComponentKeyboardEventHandler<DropdownSelectedItemProps>;\n\n  /**\n   * Called when item is removed from the selection list.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onRemove?: ComponentEventHandler<DropdownSelectedItemProps>;\n}\n\nclass DropdownSelectedItem extends UIComponent<WithAsProp<DropdownSelectedItemProps>, any> {\n  itemRef = React.createRef<HTMLElement>();\n\n  static displayName = 'DropdownSelectedItem';\n  static create: ShorthandFactory<DropdownSelectedItemProps>;\n  static slotClassNames: DropdownSelectedItemSlotClassNames;\n  static className = 'ui-dropdown__selecteditem';\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      accessibility: false,\n      children: false,\n    }),\n    active: PropTypes.bool,\n    header: customPropTypes.itemShorthand,\n    icon: customPropTypes.shorthandAllowingChildren,\n    image: customPropTypes.itemShorthandWithoutJSX,\n    onClick: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    onRemove: PropTypes.func,\n  };\n\n  static defaultProps = {\n    // TODO: fix me\n    icon: <CloseIcon />,\n  };\n\n  componentDidUpdate(prevProps: DropdownSelectedItemProps) {\n    if (!prevProps.active && this.props.active) {\n      this.itemRef.current.focus();\n    }\n  }\n\n  handleClick = (e: React.SyntheticEvent) => {\n    _.invoke(this.props, 'onClick', e, this.props);\n  };\n\n  handleKeyDown = (e: React.SyntheticEvent) => {\n    _.invoke(this.props, 'onKeyDown', e, this.props);\n  };\n\n  handleIconOverrides = props => (predefinedProps: BoxProps) => ({\n    ...props,\n    onClick: (e: React.SyntheticEvent, iconProps: BoxProps) => {\n      e.stopPropagation();\n      _.invoke(this.props, 'onRemove', e, this.props);\n      _.invoke(predefinedProps, 'onClick', e, iconProps);\n    },\n    onKeyDown: (e: React.SyntheticEvent, iconProps: BoxProps) => {\n      e.stopPropagation();\n      if (keyboardKey.getCode(e) === keyboardKey.Enter) {\n        _.invoke(this.props, 'onRemove', e, this.props);\n      }\n      _.invoke(predefinedProps, 'onKeyDown', e, iconProps);\n    },\n  });\n\n  renderComponent({ unhandledProps, classes, styles }: RenderResultConfig<DropdownSelectedItemProps>) {\n    const { active, header, icon, image } = this.props;\n\n    const contentElement = Box.create(header, {\n      defaultProps: () => ({\n        as: 'span',\n        className: DropdownSelectedItem.slotClassNames.header,\n        styles: styles.header,\n      }),\n    });\n    const iconProps = _.isNil(icon)\n      ? icon\n      : {\n          name: null,\n          children: (ComponentType, props) =>\n            Box.create(icon, {\n              defaultProps: () => ({\n                'aria-label': `Remove ${header} from selection.`, // TODO: Extract this in a behaviour.\n                className: DropdownSelectedItem.slotClassNames.icon,\n                styles: styles.icon,\n              }),\n              overrideProps: this.handleIconOverrides(props),\n            }),\n        };\n    const imageProps = _.isNil(image)\n      ? image\n      : {\n          children: (ComponentType, props) =>\n            Image.create(image, {\n              defaultProps: () => ({\n                avatar: true,\n                className: DropdownSelectedItem.slotClassNames.image,\n                styles: styles.image,\n              }),\n              overrideProps: props,\n            }),\n        };\n\n    return (\n      <Ref innerRef={this.itemRef}>\n        <Label\n          className={classes.root}\n          tabIndex={active ? 0 : -1}\n          styles={styles.root}\n          circular\n          onClick={this.handleClick}\n          onKeyDown={this.handleKeyDown}\n          content={contentElement}\n          icon={iconProps}\n          image={imageProps}\n          {...unhandledProps}\n        />\n      </Ref>\n    );\n  }\n}\n\nDropdownSelectedItem.slotClassNames = {\n  header: `${DropdownSelectedItem.className}__header`,\n  icon: `${DropdownSelectedItem.className}__icon`,\n  image: `${DropdownSelectedItem.className}__image`,\n};\n\nDropdownSelectedItem.create = createShorthandFactory({\n  Component: DropdownSelectedItem,\n  mappedProp: 'header',\n});\n\n/**\n * A DropdownSelectedItem represents a selected item of 'multiple-selection' Dropdown.\n */\nexport default withSafeTypeForAs<typeof DropdownSelectedItem, DropdownSelectedItemProps>(DropdownSelectedItem);\n"],"file":"DropdownSelectedItem.js"}