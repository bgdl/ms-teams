{"version":3,"sources":["components/Table/Table.tsx"],"names":["tableBehavior","customPropTypes","PropTypes","React","commonPropTypes","UIComponent","applyAccessibilityKeyHandlers","childrenExist","mergeComponentVariables","TableRow","TableCell","withSafeTypeForAs","handleVariablesOverrides","variables","predefinedProps","Table","accessibility","props","rows","compact","row","index","onClick","e","overrideProps","create","defaultProps","childBehaviors","undefined","header","headerRowProps","className","slotClassNames","ElementType","classes","unhandledProps","children","hasChildren","root","attributes","keyHandlers","renderHeader","renderRows","createCommon","content","every","disallow","oneOfType","arrayOf","nodeContent","itemShorthand","collectionShorthand","bool","as"],"mappings":"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","sourcesContent":["import { Accessibility, tableBehavior } from '@fluentui/accessibility';\nimport { ReactAccessibilityBehavior } from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\nimport * as React from 'react';\nimport {\n  RenderResultConfig,\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  UIComponent,\n  applyAccessibilityKeyHandlers,\n  childrenExist,\n} from '../../utils';\nimport { ComponentVariablesObject, mergeComponentVariables } from '@fluentui/styles';\nimport TableRow, { TableRowProps } from './TableRow';\nimport TableCell from './TableCell';\nimport { WithAsProp, ShorthandCollection, ShorthandValue, withSafeTypeForAs } from '../../types';\n\nexport interface TableSlotClassNames {\n  header: string;\n}\n\nexport interface TableProps extends UIComponentProps, ChildrenComponentProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   * */\n  accessibility?: Accessibility;\n\n  /** The columns of the Table with a space-separated list of values.\n   */\n  header?: ShorthandValue<TableRowProps>;\n\n  /** The rows of the Table with a space-separated list of values.\n   */\n  rows?: ShorthandCollection<TableRowProps>;\n\n  /**\n   * Render table in compact mode\n   */\n  compact?: boolean;\n}\n\nconst handleVariablesOverrides = variables => predefinedProps => ({\n  variables: mergeComponentVariables(variables, predefinedProps.variables),\n});\n\nclass Table extends UIComponent<WithAsProp<TableProps>> {\n  static displayName = 'Table';\n  static className = 'ui-table';\n\n  static Cell = TableCell;\n  static Row = TableRow;\n\n  static slotClassNames: TableSlotClassNames = {\n    header: `${Table.className}__header`,\n  };\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      content: false,\n    }),\n    content: customPropTypes.every([\n      customPropTypes.disallow(['children']),\n      PropTypes.oneOfType([PropTypes.arrayOf(customPropTypes.nodeContent), customPropTypes.nodeContent]),\n    ]),\n    header: customPropTypes.itemShorthand,\n    rows: customPropTypes.collectionShorthand,\n    compact: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    as: 'div',\n    accessibility: tableBehavior as Accessibility,\n  };\n\n  renderRows(accessibility: ReactAccessibilityBehavior, variables: ComponentVariablesObject) {\n    const { rows, compact } = this.props;\n\n    return _.map(rows, (row: TableRowProps, index: number) => {\n      const props = {\n        compact,\n        onClick: (e, props) => {\n          _.invoke(row, 'onClick', e, props);\n        },\n      } as TableRowProps;\n      const overrideProps = handleVariablesOverrides(variables);\n      return TableRow.create(row, {\n        defaultProps: () => ({\n          ...props,\n          accessibility: accessibility.childBehaviors ? accessibility.childBehaviors.row : undefined,\n        }),\n        overrideProps,\n      });\n    });\n  }\n\n  renderHeader(accessibility: ReactAccessibilityBehavior, variables: ComponentVariablesObject) {\n    const { header, compact } = this.props;\n    if (!header) {\n      return null;\n    }\n\n    const headerRowProps = {\n      header: true,\n      compact,\n      className: Table.slotClassNames.header,\n    } as TableRowProps;\n\n    const overrideProps = handleVariablesOverrides(variables);\n\n    return TableRow.create(header, {\n      defaultProps: () => ({\n        ...headerRowProps,\n        accessibility: accessibility.childBehaviors ? accessibility.childBehaviors.row : undefined,\n      }),\n      overrideProps,\n    });\n  }\n\n  renderComponent({\n    accessibility,\n    ElementType,\n    classes,\n    variables,\n    unhandledProps,\n  }: RenderResultConfig<any>): React.ReactNode {\n    const { children } = this.props;\n    const hasChildren = childrenExist(children);\n\n    return (\n      <ElementType\n        className={classes.root}\n        {...accessibility.attributes.root}\n        {...unhandledProps}\n        {...applyAccessibilityKeyHandlers(accessibility.keyHandlers.root, unhandledProps)}\n      >\n        {hasChildren && children}\n        {/* <thead> */}\n        {!hasChildren && this.renderHeader(accessibility, variables)}\n        {/* </thead> */}\n        {/* <tbody> */}\n        {!hasChildren && this.renderRows(accessibility, variables)}\n        {/* </tbody> */}\n      </ElementType>\n    );\n  }\n}\n\n/**\n * A Table is used to display data in tabular layout\n * * @accessibility\n * Implements ARIA [Data Grid](https://www.w3.org/TR/wai-aria-practices/#dataGrid) design pattern for presenting tabular information.\n * When gridcell contains actionable element, use [gridCellWithFocusableElementBehavior](/components/table/accessibility#grid-cell-with-focusable-element-behavior-ts). [More information available in aria documentation.](https://www.w3.org/TR/wai-aria-practices/#gridNav_focus)\n * Use [gridCellMultipleFocusableBehavior](/components/table/accessibility#gridCellMultipleFocusableBehavior), when gridcell contains:\n * \\- editable content\n * \\- multiple actionable elements\n * \\- component that utilizes arrow keys in its navigation, like menu button, dropdown, radio group, slider, etc.\n * [More information available in aria documentation.](https://www.w3.org/TR/wai-aria-practices/#gridNav_inside)\n * @accessibilityIssues\n * [NVDA narrate table title(aria-label) twice](https://github.com/nvaccess/nvda/issues/10548)\n * [Accessibility DOM > Table > gridcell > when gridcell is focused, then selected state is send to reader](https://bugs.chromium.org/p/chromium/issues/detail?id=1030378)\n * [JAWS narrate grid name twice, once as table and second time as grid](https://github.com/FreedomScientific/VFO-standards-support/issues/346)\n * [JAWS doesn't narrate grid column name, when focus is on actionable element in the cell] (https://github.com/FreedomScientific/VFO-standards-support/issues/348)\n * [aria-sort is not output at child elements](https://github.com/FreedomScientific/VFO-standards-support/issues/319)\n * [VoiceOver not announcing rows correctly for a grid with presentation elements inside](https://bugs.chromium.org/p/chromium/issues/detail?id=1054424)\n * VoiceOver doesn't narrate aria-rowcount value in table or grid\n */\nexport default withSafeTypeForAs<typeof Table, TableProps, 'div'>(Table);\n"],"file":"Table.js"}