{"version":3,"sources":["components/Input/Input.tsx"],"names":["inputBehavior","handleRef","Ref","customPropTypes","React","PropTypes","cx","AutoControlledComponent","partitionHTMLProps","commonPropTypes","applyAccessibilityKeyHandlers","withSafeTypeForAs","Box","Input","createRef","clear","e","props","clearable","state","value","stopPropagation","nativeEvent","handleOnClear","predefinedProps","onClick","disabled","inputRef","current","focus","setState","icon","length","accessibility","ElementType","unhandledProps","styles","variables","className","input","type","wrapper","htmlInputProps","restProps","create","defaultProps","attributes","root","children","inputElement","as","slotClassNames","onChange","handleChange","keyHandlers","computeIcon","overrideProps","handleIconOverrides","hasValue","createCommon","content","bool","defaultValue","oneOfType","string","number","fluid","shorthandAllowingChildren","iconPosition","oneOf","itemShorthand","ref","inline","inverted","func","wrapperShorthand"],"mappings":"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","sourcesContent":["import { Accessibility, inputBehavior } from '@fluentui/accessibility';\nimport { handleRef, Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport * as _ from 'lodash';\n\nimport {\n  AutoControlledComponent,\n  RenderResultConfig,\n  partitionHTMLProps,\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  applyAccessibilityKeyHandlers,\n} from '../../utils';\nimport { SupportedIntrinsicInputProps } from '../../utils/htmlPropsUtils';\nimport { WithAsProp, ShorthandValue, ComponentEventHandler, withSafeTypeForAs } from '../../types';\nimport Box, { BoxProps } from '../Box/Box';\n\nexport interface InputSlotClassNames {\n  input: string;\n  icon: string;\n}\n\nexport interface InputProps extends UIComponentProps, ChildrenComponentProps, SupportedIntrinsicInputProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   */\n  accessibility?: Accessibility;\n\n  /** A property that will change the icon on the input and clear the input on click on Cancel. */\n  clearable?: boolean;\n\n  /** The default value of the input. */\n  defaultValue?: string | string[];\n\n  /** An Input can be disabled. */\n  disabled?: boolean;\n\n  /** An input can take the width of its container. */\n  fluid?: boolean;\n\n  /** Optional Icon to display inside the Input. */\n  icon?: ShorthandValue<BoxProps>;\n\n  /** An Input with icon can format the icon to appear at the start or at the end of the input field. */\n  iconPosition?: 'start' | 'end';\n\n  /** An input can be used inline with text. */\n  inline?: boolean;\n\n  /** Shorthand for the input component. */\n  input?: ShorthandValue<BoxProps>;\n\n  /** An input can have inverted colors. */\n  inverted?: boolean;\n\n  /**\n   * Called on change.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onChange?: ComponentEventHandler<InputProps & { value: string }>;\n\n  /** The HTML input type. */\n  type?: string;\n\n  /** Ref for input DOM node. */\n  inputRef?: React.Ref<HTMLElement>;\n\n  /** The value of the input. */\n  value?: string | number;\n\n  /** Shorthand for the wrapper component. */\n  wrapper?: ShorthandValue<BoxProps>;\n}\n\nexport interface InputState {\n  value?: InputProps['value'];\n  hasValue?: boolean;\n}\n\nclass Input extends AutoControlledComponent<WithAsProp<InputProps>, InputState> {\n  inputRef = React.createRef<HTMLElement>();\n\n  static className = 'ui-input';\n\n  static displayName = 'Input';\n\n  static slotClassNames: InputSlotClassNames;\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      content: false,\n    }),\n    clearable: PropTypes.bool,\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    disabled: PropTypes.bool,\n    fluid: PropTypes.bool,\n    icon: customPropTypes.shorthandAllowingChildren,\n    iconPosition: PropTypes.oneOf(['start', 'end']),\n    input: customPropTypes.itemShorthand,\n    inputRef: customPropTypes.ref,\n    inline: PropTypes.bool,\n    inverted: PropTypes.bool,\n    onChange: PropTypes.func,\n    type: PropTypes.string,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    wrapper: customPropTypes.wrapperShorthand,\n  };\n\n  static defaultProps = {\n    accessibility: inputBehavior,\n    type: 'text',\n    wrapper: {},\n    iconPosition: 'end',\n  };\n\n  static autoControlledProps = ['value'];\n\n  static getAutoControlledStateFromProps(props: InputProps, state: InputState): Partial<InputState> {\n    const { value } = state;\n\n    return {\n      hasValue: !!value && (value as string).length !== 0,\n    };\n  }\n\n  actionHandlers = {\n    clear: (e: React.KeyboardEvent) => {\n      if (this.props.clearable && this.state.value !== '') {\n        e.stopPropagation();\n        e.nativeEvent && e.nativeEvent.stopPropagation();\n        this.handleOnClear(e);\n      }\n    },\n  };\n\n  renderComponent({ accessibility, ElementType, unhandledProps, styles, variables }: RenderResultConfig<InputProps>) {\n    const { className, input, inputRef, type, wrapper, disabled } = this.props;\n    const { value = '' } = this.state;\n    const [htmlInputProps, restProps] = partitionHTMLProps(unhandledProps);\n\n    return Box.create(wrapper, {\n      defaultProps: () => ({\n        ...accessibility.attributes.root,\n        className: cx(Input.className, className),\n        children: (\n          <>\n            <Ref\n              innerRef={(inputElement: HTMLElement) => {\n                handleRef(this.inputRef, inputElement);\n                handleRef(inputRef, inputElement);\n              }}\n            >\n              {Box.create(input || type, {\n                defaultProps: () => ({\n                  ...htmlInputProps,\n                  as: 'input',\n                  disabled,\n                  type,\n                  value,\n                  className: Input.slotClassNames.input,\n                  styles: styles.input,\n                  onChange: this.handleChange,\n                  ...applyAccessibilityKeyHandlers(accessibility.keyHandlers.input, htmlInputProps),\n                }),\n              })}\n            </Ref>\n            {Box.create(this.computeIcon(), {\n              defaultProps: () => ({\n                className: Input.slotClassNames.icon,\n                styles: styles.icon,\n              }),\n              overrideProps: this.handleIconOverrides,\n            })}\n          </>\n        ),\n        styles: styles.root,\n        ...restProps,\n      }),\n      overrideProps: {\n        as: (wrapper && (wrapper as any).as) || ElementType,\n      },\n    });\n  }\n\n  handleIconOverrides = predefinedProps => ({\n    onClick: (e: React.SyntheticEvent) => {\n      if (!this.props.disabled) {\n        this.handleOnClear(e);\n        this.inputRef.current.focus();\n      }\n\n      _.invoke(predefinedProps, 'onClick', e, this.props);\n    },\n  });\n\n  handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (this.props.disabled) {\n      return;\n    }\n\n    const value = _.get(e, 'target.value');\n\n    _.invoke(this.props, 'onChange', e, { ...this.props, value });\n\n    this.setState({ value });\n  };\n\n  handleOnClear = (e: React.SyntheticEvent) => {\n    if (this.props.clearable) {\n      _.invoke(this.props, 'onChange', e, { ...this.props, value: '' });\n      this.setState({ value: '' });\n    }\n  };\n\n  computeIcon = (): ShorthandValue<BoxProps> => {\n    const { clearable, icon } = this.props;\n    const { value } = this.state;\n\n    if (clearable && (value as string).length !== 0) {\n      return {};\n    }\n\n    return icon || null;\n  };\n}\n\nInput.slotClassNames = {\n  input: `${Input.className}__input`,\n  icon: `${Input.className}__icon`,\n};\n\n/**\n * An Input is a field used to elicit an input from a user.\n *\n * @accessibility\n * For good screen reader experience set `aria-label` or `aria-labelledby` attribute for input.\n */\nexport default withSafeTypeForAs<typeof Input, InputProps, 'div'>(Input);\n"],"file":"Input.js"}