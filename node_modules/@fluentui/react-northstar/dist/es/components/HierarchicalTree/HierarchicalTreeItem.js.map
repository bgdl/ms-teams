{"version":3,"sources":["components/HierarchicalTree/HierarchicalTreeItem.tsx"],"names":["hierarchicalTreeItemBehavior","hierarchicalSubtreeBehavior","getFirstFocusable","customPropTypes","Ref","PropTypes","React","HierarchicalTree","HierarchicalTreeTitle","UIComponent","childrenExist","createShorthandFactory","commonPropTypes","rtlTextContainer","applyAccessibilityKeyHandlers","withSafeTypeForAs","HierarchicalTreeItem","createRef","performClick","e","preventDefault","stopPropagation","props","receiveFocus","eventComesFromChildItem","itemRef","current","focus","collapse","handleTitleClick","expand","focusSubtree","element","treeRef","currentTarget","target","predefinedProps","onClick","titleProps","items","title","renderItemTitle","open","exclusive","hasSubtree","create","defaultProps","className","slotClassNames","as","render","overrideProps","handleTitleOverrides","accessibility","subtree","ElementType","classes","unhandledProps","styles","variables","children","root","attributes","getAttributes","forElements","keyHandlers","renderContent","createCommon","content","collectionShorthand","index","number","bool","onTitleClick","func","itemShorthand","Component","mappedProp"],"mappings":";;;;;;;;;;AAAA,SAAwBA,4BAAxB,EAAsDC,2BAAtD,QAAyF,yBAAzF;AACA,SAASC,iBAAT,QAAkC,0BAAlC;AACA,OAAO,KAAKC,eAAZ,MAAiC,2BAAjC;AACA,SAASC,GAAT,QAAoB,+BAApB;AAEA,OAAO,KAAKC,SAAZ,MAA2B,YAA3B;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AAEA,OAAOC,gBAAP,MAAwD,oBAAxD;AACA,OAAOC,qBAAP,MAAkE,yBAAlE;AACA,SACEC,WADF,EAEEC,aAFF,EAGEC,sBAHF,EAIEC,eAJF,EAOEC,gBAPF,EAQEC,6BARF,QAUO,aAVP;AAWA,SAKEC,iBALF,QAOO,aAPP;;IA+CMC,oB;;;;;;;;;;;;;;;;;;8DA8BMV,KAAK,CAACW,SAAN,E;;8DACAX,KAAK,CAACW,SAAN,E;;qEAEO;AACfC,MAAAA,YAAY,EAAE,sBAAAC,CAAC,EAAI;AACjBA,QAAAA,CAAC,CAACC,cAAF;AACAD,QAAAA,CAAC,CAACE,eAAF;;AAEA,gBAAS,MAAKC,KAAd,EAAqB,cAArB,EAAqCH,CAArC,EAAwC,MAAKG,KAA7C;AACD,OANc;AAOfC,MAAAA,YAAY,EAAE,sBAAAJ,CAAC,EAAI;AACjBA,QAAAA,CAAC,CAACC,cAAF;AACAD,QAAAA,CAAC,CAACE,eAAF,GAFiB,CAIjB;;AACA,YAAI,MAAKG,uBAAL,CAA6BL,CAA7B,CAAJ,EAAqC;AACnC,gBAAKM,OAAL,CAAaC,OAAb,CAAqBC,KAArB;AACD;AACF,OAfc;AAgBfC,MAAAA,QAAQ,EAAE,kBAAAT,CAAC,EAAI;AACbA,QAAAA,CAAC,CAACC,cAAF;AACAD,QAAAA,CAAC,CAACE,eAAF,GAFa,CAIb;;AACA,YAAI,CAAC,MAAKG,uBAAL,CAA6BL,CAA7B,CAAL,EAAsC;AACpC,gBAAKU,gBAAL,CAAsBV,CAAtB;AACD;AACF,OAxBc;AAyBfW,MAAAA,MAAM,EAAE,gBAAAX,CAAC,EAAI;AACXA,QAAAA,CAAC,CAACC,cAAF;AACAD,QAAAA,CAAC,CAACE,eAAF;;AAEA,cAAKQ,gBAAL,CAAsBV,CAAtB;AACD,OA9Bc;AA+BfY,MAAAA,YAAY,EAAE,sBAAAZ,CAAC,EAAI;AACjBA,QAAAA,CAAC,CAACC,cAAF;AACAD,QAAAA,CAAC,CAACE,eAAF;AAEA,YAAMW,OAAO,GAAG9B,iBAAiB,CAAC,MAAK+B,OAAL,CAAaP,OAAd,EAAuB,MAAKO,OAAL,CAAaP,OAApC,EAA6C,IAA7C,CAAjC;;AACA,YAAIM,OAAJ,EAAa;AACXA,UAAAA,OAAO,CAACL,KAAR;AACD;AACF;AAvCc,K;;8EA0CS,UAAAR,CAAC,EAAI;AAC7B,aAAOA,CAAC,CAACe,aAAF,KAAoBf,CAAC,CAACgB,MAA7B;AACD,K;;uEAEkB,UAAAhB,CAAC,EAAI;AACtB,cAAS,MAAKG,KAAd,EAAqB,cAArB,EAAqCH,CAArC,EAAwC,MAAKG,KAA7C;AACD,K;;2EAEsB,UAACc,eAAD;AAAA,aAAkD;AACvEC,QAAAA,OAAO,EAAE,iBAAClB,CAAD,EAAImB,UAAJ,EAAmB;AAC1B,gBAAKT,gBAAL,CAAsBV,CAAtB;;AACA,kBAASiB,eAAT,EAA0B,SAA1B,EAAqCjB,CAArC,EAAwCmB,UAAxC;AACD;AAJsE,OAAlD;AAAA,K;;;;;;;oCAOP;AAAA,wBAC6C,KAAKhB,KADlD;AAAA,UACNiB,KADM,eACNA,KADM;AAAA,UACCC,KADD,eACCA,KADD;AAAA,UACQC,eADR,eACQA,eADR;AAAA,UACyBC,IADzB,eACyBA,IADzB;AAAA,UAC+BC,SAD/B,eAC+BA,SAD/B;AAEd,UAAMC,UAAU,GAAG,CAAC,OAAQL,KAAR,CAApB;AAEA,aACE,0CACG/B,qBAAqB,CAACqC,MAAtB,CAA6BL,KAA7B,EAAoC;AACnCM,QAAAA,YAAY,EAAE;AAAA,iBAAO;AACnBC,YAAAA,SAAS,EAAE/B,oBAAoB,CAACgC,cAArB,CAAoCR,KAD5B;AAEnBE,YAAAA,IAAI,EAAJA,IAFmB;AAGnBE,YAAAA,UAAU,EAAVA,UAHmB;AAInBK,YAAAA,EAAE,EAAEL,UAAU,GAAG,MAAH,GAAY;AAJP,WAAP;AAAA,SADqB;AAOnCM,QAAAA,MAAM,EAAET,eAP2B;AAQnCU,QAAAA,aAAa,EAAE,KAAKC;AARe,OAApC,CADH,EAWGR,UAAU,IAAIF,IAAd,IACC,oBAAC,GAAD;AAAK,QAAA,QAAQ,EAAE,KAAKT;AAApB,SACG1B,gBAAgB,CAACsC,MAAjB,CAAwBN,KAAxB,EAA+B;AAC9BO,QAAAA,YAAY,EAAE;AAAA,iBAAO;AACnBO,YAAAA,aAAa,EAAEpD,2BADI;AAEnB8C,YAAAA,SAAS,EAAE/B,oBAAoB,CAACgC,cAArB,CAAoCM,OAF5B;AAGnBX,YAAAA,SAAS,EAATA,SAHmB;AAInBF,YAAAA,eAAe,EAAfA;AAJmB,WAAP;AAAA;AADgB,OAA/B,CADH,CAZJ,CADF;AA0BD;;;0CAE2F;AAAA,UAA1Ec,WAA0E,QAA1EA,WAA0E;AAAA,UAA7DF,aAA6D,QAA7DA,aAA6D;AAAA,UAA9CG,OAA8C,QAA9CA,OAA8C;AAAA,UAArCC,cAAqC,QAArCA,cAAqC;AAAA,UAArBC,MAAqB,QAArBA,MAAqB;AAAA,UAAbC,SAAa,QAAbA,SAAa;AAAA,UAClFC,QADkF,GACrE,KAAKtC,KADgE,CAClFsC,QADkF;AAG1F,aACE,oBAAC,GAAD;AAAK,QAAA,QAAQ,EAAE,KAAKnC;AAApB,SACE,oBAAC,WAAD;AACE,QAAA,SAAS,EAAE+B,OAAO,CAACK;AADrB,SAEMR,aAAa,CAACS,UAAd,CAAyBD,IAF/B,EAGMhD,gBAAgB,CAACkD,aAAjB,CAA+B;AAAEC,QAAAA,WAAW,EAAE,CAACJ,QAAD;AAAf,OAA/B,CAHN,EAIMH,cAJN,EAKM3C,6BAA6B,CAACuC,aAAa,CAACY,WAAd,CAA0BJ,IAA3B,EAAiCJ,cAAjC,CALnC,GAOG/C,aAAa,CAACkD,QAAD,CAAb,GAA0BA,QAA1B,GAAqC,KAAKM,aAAL,EAPxC,CADF,CADF;AAaD;;;;EA1IgCzD,W;;gBAA7BO,oB;;gBAAAA,oB,iBAGiB,sB;;gBAHjBA,oB,eAKe,2B;;gBALfA,oB,oBAOwD;AAC1DwB,EAAAA,KAAK,YAAKxB,oBAAoB,CAAC+B,SAA1B,YADqD;AAE1DO,EAAAA,OAAO,YAAKtC,oBAAoB,CAAC+B,SAA1B;AAFmD,C;;gBAPxD/B,oB,iCAaCJ,eAAe,CAACuD,YAAhB,CAA6B;AAC9BC,EAAAA,OAAO,EAAE;AADqB,CAA7B,C;AAGH7B,EAAAA,KAAK,EAAEpC,eAAe,CAACkE,mB;AACvBC,EAAAA,KAAK,EAAEjE,SAAS,CAACkE,M;AACjB5B,EAAAA,SAAS,EAAEtC,SAAS,CAACmE,I;AACrBC,EAAAA,YAAY,EAAEpE,SAAS,CAACqE,I;AACxBhC,EAAAA,IAAI,EAAErC,SAAS,CAACmE,I;AAChB/B,EAAAA,eAAe,EAAEpC,SAAS,CAACqE,I;AAC3BlC,EAAAA,KAAK,EAAErC,eAAe,CAACwE;;;gBAtBrB3D,oB,kBAyBkB;AACpBiC,EAAAA,EAAE,EAAE,IADgB;AAEpBI,EAAAA,aAAa,EAAErD;AAFK,C;;AAoHxBgB,oBAAoB,CAAC6B,MAArB,GAA8BlC,sBAAsB,CAAC;AACnDiE,EAAAA,SAAS,EAAE5D,oBADwC;AAEnD6D,EAAAA,UAAU,EAAE;AAFuC,CAAD,CAApD;AAKA;;;;;;;AAMA,eAAe9D,iBAAiB,CAA+DC,oBAA/D,CAAhC","sourcesContent":["import { Accessibility, hierarchicalTreeItemBehavior, hierarchicalSubtreeBehavior } from '@fluentui/accessibility';\nimport { getFirstFocusable } from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport { Ref } from '@fluentui/react-component-ref';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport HierarchicalTree, { HierarchicalTreeProps } from './HierarchicalTree';\nimport HierarchicalTreeTitle, { HierarchicalTreeTitleProps } from './HierarchicalTreeTitle';\nimport {\n  UIComponent,\n  childrenExist,\n  createShorthandFactory,\n  commonPropTypes,\n  UIComponentProps,\n  ChildrenComponentProps,\n  rtlTextContainer,\n  applyAccessibilityKeyHandlers,\n  ShorthandFactory,\n} from '../../utils';\nimport {\n  ComponentEventHandler,\n  WithAsProp,\n  ShorthandRenderFunction,\n  ShorthandValue,\n  withSafeTypeForAs,\n  ShorthandCollection,\n} from '../../types';\n\nexport interface HierarchicalTreeItemSlotClassNames {\n  title: string;\n  subtree: string;\n}\n\nexport interface HierarchicalTreeItemProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility;\n\n  /** Only allow one subtree to be open at a time. */\n  exclusive?: boolean;\n\n  /** The index of the item among its sibbling */\n  index?: number;\n\n  /** Array of props for sub tree. */\n  items?: ShorthandValue<HierarchicalTreeProps> | ShorthandCollection<HierarchicalTreeItemProps>;\n\n  /** Called when a tree title is clicked. */\n  onTitleClick?: ComponentEventHandler<HierarchicalTreeItemProps>;\n\n  /** Whether or not the subtree of the item is in the open state. */\n  open?: boolean;\n\n  /**\n   * A custom render iterator for rendering each Accordion panel title.\n   * The default component, props, and children are available for each panel title.\n   *\n   * @param Component - The computed component for this slot.\n   * @param props - The computed props for this slot.\n   * @param children - The computed children for this slot.\n   */\n  renderItemTitle?: ShorthandRenderFunction<HierarchicalTreeTitleProps>;\n\n  /** Properties for TreeTitle. */\n  title?: ShorthandValue<HierarchicalTreeTitleProps>;\n}\n\nclass HierarchicalTreeItem extends UIComponent<WithAsProp<HierarchicalTreeItemProps>> {\n  static create: ShorthandFactory<HierarchicalTreeItemProps>;\n\n  static displayName = 'HierarchicalTreeItem';\n\n  static className = 'ui-hierarchicaltree__item';\n\n  static slotClassNames: HierarchicalTreeItemSlotClassNames = {\n    title: `${HierarchicalTreeItem.className}__title`,\n    subtree: `${HierarchicalTreeItem.className}__subtree`,\n  };\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      content: false,\n    }),\n    items: customPropTypes.collectionShorthand,\n    index: PropTypes.number,\n    exclusive: PropTypes.bool,\n    onTitleClick: PropTypes.func,\n    open: PropTypes.bool,\n    renderItemTitle: PropTypes.func,\n    title: customPropTypes.itemShorthand,\n  };\n\n  static defaultProps = {\n    as: 'li',\n    accessibility: hierarchicalTreeItemBehavior,\n  };\n\n  itemRef = React.createRef<HTMLElement>();\n  treeRef = React.createRef<HTMLElement>();\n\n  actionHandlers = {\n    performClick: e => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _.invoke(this.props, 'onTitleClick', e, this.props);\n    },\n    receiveFocus: e => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      // Focuses the title if the event comes from a child item.\n      if (this.eventComesFromChildItem(e)) {\n        this.itemRef.current.focus();\n      }\n    },\n    collapse: e => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      // Handle click on title if the keyboard event was dispatched on that title\n      if (!this.eventComesFromChildItem(e)) {\n        this.handleTitleClick(e);\n      }\n    },\n    expand: e => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      this.handleTitleClick(e);\n    },\n    focusSubtree: e => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      const element = getFirstFocusable(this.treeRef.current, this.treeRef.current, true);\n      if (element) {\n        element.focus();\n      }\n    },\n  };\n\n  eventComesFromChildItem = e => {\n    return e.currentTarget !== e.target;\n  };\n\n  handleTitleClick = e => {\n    _.invoke(this.props, 'onTitleClick', e, this.props);\n  };\n\n  handleTitleOverrides = (predefinedProps: HierarchicalTreeTitleProps) => ({\n    onClick: (e, titleProps) => {\n      this.handleTitleClick(e);\n      _.invoke(predefinedProps, 'onClick', e, titleProps);\n    },\n  });\n\n  renderContent() {\n    const { items, title, renderItemTitle, open, exclusive } = this.props;\n    const hasSubtree = !_.isNil(items);\n\n    return (\n      <>\n        {HierarchicalTreeTitle.create(title, {\n          defaultProps: () => ({\n            className: HierarchicalTreeItem.slotClassNames.title,\n            open,\n            hasSubtree,\n            as: hasSubtree ? 'span' : 'a',\n          }),\n          render: renderItemTitle,\n          overrideProps: this.handleTitleOverrides,\n        })}\n        {hasSubtree && open && (\n          <Ref innerRef={this.treeRef}>\n            {HierarchicalTree.create(items, {\n              defaultProps: () => ({\n                accessibility: hierarchicalSubtreeBehavior,\n                className: HierarchicalTreeItem.slotClassNames.subtree,\n                exclusive,\n                renderItemTitle,\n              }),\n            })}\n          </Ref>\n        )}\n      </>\n    );\n  }\n\n  renderComponent({ ElementType, accessibility, classes, unhandledProps, styles, variables }) {\n    const { children } = this.props;\n\n    return (\n      <Ref innerRef={this.itemRef}>\n        <ElementType\n          className={classes.root}\n          {...accessibility.attributes.root}\n          {...rtlTextContainer.getAttributes({ forElements: [children] })}\n          {...unhandledProps}\n          {...applyAccessibilityKeyHandlers(accessibility.keyHandlers.root, unhandledProps)}\n        >\n          {childrenExist(children) ? children : this.renderContent()}\n        </ElementType>\n      </Ref>\n    );\n  }\n}\n\nHierarchicalTreeItem.create = createShorthandFactory({\n  Component: HierarchicalTreeItem,\n  mappedProp: 'title',\n});\n\n/**\n * A TreeItem renders an item of a Tree.\n *\n * @accessibility\n * Implements [ARIA TreeView](https://www.w3.org/TR/wai-aria-practices-1.1/#TreeView) design pattern.\n */\nexport default withSafeTypeForAs<typeof HierarchicalTreeItem, HierarchicalTreeItemProps, 'li'>(HierarchicalTreeItem);\n"],"file":"HierarchicalTreeItem.js"}