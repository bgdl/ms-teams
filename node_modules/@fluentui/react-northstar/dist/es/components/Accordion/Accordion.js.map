{"version":3,"sources":["components/Accordion/Accordion.tsx"],"names":["accordionBehavior","customPropTypes","PropTypes","React","AutoControlledComponent","childrenExist","commonPropTypes","rtlTextContainer","applyAccessibilityKeyHandlers","AccordionTitle","AccordionContent","withSafeTypeForAs","ContainerFocusHandler","Accordion","props","context","moveNext","e","preventDefault","focusHandler","movePrevious","moveFirst","moveLast","index","setState","focusedIndex","targetComponent","itemRefs","current","focus","panels","length","activeIndex","state","exclusive","isIndexActionable","predefinedProps","onClick","titleProps","computeNewIndex","onFocus","isIndexActive","expanded","children","renderPanelContent","renderPanelTitle","syncFocusedIndex","panel","content","title","active","canBeCollapsed","contentRef","createRef","titleId","defaultAccordionTitleId","contentId","defaultAccordionContentId","push","create","defaultProps","className","slotClassNames","id","accordionContentId","overrideProps","handleTitleOverrides","render","accordionTitleId","getNavigationItemsSize","handleNavigationFocus","alwaysActiveIndex","ElementType","classes","accessibility","unhandledProps","attributes","root","getAttributes","forElements","keyHandlers","renderPanels","createCommon","every","disallow","oneOfType","arrayOf","number","defaultActiveIndex","bool","onTitleClick","func","onActiveIndexChange","shape","itemShorthand","as"],"mappings":"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","sourcesContent":["import { Accessibility, accordionBehavior } from '@fluentui/accessibility';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport {\n  AutoControlledComponent,\n  childrenExist,\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  rtlTextContainer,\n  applyAccessibilityKeyHandlers,\n} from '../../utils';\nimport AccordionTitle, { AccordionTitleProps } from './AccordionTitle';\nimport AccordionContent, { AccordionContentProps } from './AccordionContent';\n\nimport {\n  ComponentEventHandler,\n  WithAsProp,\n  ShorthandValue,\n  ShorthandRenderFunction,\n  withSafeTypeForAs,\n} from '../../types';\nimport { ContainerFocusHandler } from '../../utils/accessibility/FocusHandling/FocusContainer';\n\nexport interface AccordionSlotClassNames {\n  content: string;\n  title: string;\n}\n\nexport interface AccordionProps extends UIComponentProps, ChildrenComponentProps {\n  /** Index of the currently active panel. */\n  activeIndex?: number[] | number;\n\n  /** Initial activeIndex value. */\n  defaultActiveIndex?: number[] | number;\n\n  /** Only allow one panel to be expanded at a time. */\n  exclusive?: boolean;\n\n  /** At least one panel should be expanded at any time. */\n  expanded?: boolean;\n\n  /**\n   * Called when the active index of the Accordion changes.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props, with `activeIndex` reflecting the new state.\n   */\n  onActiveIndexChange?: ComponentEventHandler<AccordionProps>;\n\n  /**\n   * Called when a panel title is clicked.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All item props.\n   */\n  onTitleClick?: ComponentEventHandler<AccordionProps>;\n\n  /** Shorthand array of props for Accordion. */\n  panels?: {\n    content: ShorthandValue<AccordionContentProps>;\n    title: ShorthandValue<AccordionTitleProps>;\n  }[];\n\n  /**\n   * A custom renderer for each Accordion's panel title.\n   *\n   * @param Component - The panel's component type.\n   * @param props - The panel's computed props.\n   */\n  renderPanelTitle?: ShorthandRenderFunction<AccordionTitleProps>;\n\n  /**\n   * A custom renderer for each Accordion's panel content.\n   *\n   * @param Component - The panel's component type.\n   * @param props - The panel's computed props.\n   */\n  renderPanelContent?: ShorthandRenderFunction<AccordionContentProps>;\n\n  /**\n   * Accessibility behavior if overridden by the user.\n   */\n  accessibility?: Accessibility;\n}\n\nexport interface AccordionState {\n  activeIndex: number[] | number;\n  focusedIndex: number;\n}\n\nclass Accordion extends AutoControlledComponent<WithAsProp<AccordionProps>, AccordionState> {\n  static displayName = 'Accordion';\n\n  static className = 'ui-accordion';\n\n  static slotClassNames: AccordionSlotClassNames = {\n    content: `${Accordion.className}__content`,\n    title: `${Accordion.className}__title`,\n  };\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      content: false,\n    }),\n    activeIndex: customPropTypes.every([\n      customPropTypes.disallow(['children']),\n      PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.number), PropTypes.number]),\n    ]),\n    defaultActiveIndex: customPropTypes.every([\n      customPropTypes.disallow(['children']),\n      PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.number), PropTypes.number]),\n    ]),\n    exclusive: PropTypes.bool,\n    expanded: PropTypes.bool,\n    onTitleClick: customPropTypes.every([customPropTypes.disallow(['children']), PropTypes.func]),\n    onActiveIndexChange: PropTypes.func,\n    panels: customPropTypes.every([\n      customPropTypes.disallow(['children']),\n      PropTypes.arrayOf(\n        PropTypes.shape({\n          content: customPropTypes.itemShorthand,\n          title: customPropTypes.itemShorthand,\n        }),\n      ),\n    ]),\n\n    renderPanelTitle: PropTypes.func,\n    renderPanelContent: PropTypes.func,\n  };\n\n  static defaultProps = {\n    accessibility: accordionBehavior,\n    as: 'dl',\n  };\n\n  static autoControlledProps = ['activeIndex'];\n\n  static Title = AccordionTitle;\n  static Content = AccordionContent;\n\n  focusHandler: ContainerFocusHandler = null;\n  itemRefs = [];\n  defaultAccordionTitleId = _.uniqueId('accordion-title-');\n  defaultAccordionContentId = _.uniqueId('accordion-content-');\n\n  actionHandlers = {\n    moveNext: e => {\n      e.preventDefault();\n      this.focusHandler.moveNext();\n    },\n    movePrevious: e => {\n      e.preventDefault();\n      this.focusHandler.movePrevious();\n    },\n    moveFirst: e => {\n      e.preventDefault();\n      this.focusHandler.moveFirst();\n    },\n    moveLast: e => {\n      e.preventDefault();\n      this.focusHandler.moveLast();\n    },\n  };\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.focusHandler = new ContainerFocusHandler(this.getNavigationItemsSize, this.handleNavigationFocus, true);\n  }\n\n  handleNavigationFocus = (index: number) => {\n    this.setState({ focusedIndex: index }, () => {\n      const targetComponent = this.itemRefs[index] && this.itemRefs[index].current;\n      targetComponent && targetComponent.focus();\n    });\n  };\n\n  getNavigationItemsSize = () => this.props.panels.length;\n\n  getInitialAutoControlledState({ expanded, exclusive }: AccordionProps) {\n    const alwaysActiveIndex = expanded ? 0 : -1;\n    return { activeIndex: exclusive ? alwaysActiveIndex : [alwaysActiveIndex] };\n  }\n\n  computeNewIndex = (index: number): number | number[] => {\n    const { activeIndex } = this.state;\n    const { exclusive } = this.props;\n\n    if (!this.isIndexActionable(index)) {\n      return activeIndex;\n    }\n\n    if (exclusive) return index === activeIndex ? -1 : index;\n    // check to see if index is in array, and remove it, if not then add it\n    return _.includes(activeIndex as number[], index)\n      ? _.without(activeIndex as number[], index)\n      : [...(activeIndex as number[]), index];\n  };\n\n  handleTitleOverrides = (predefinedProps: AccordionTitleProps) => ({\n    onClick: (e: React.SyntheticEvent, titleProps: AccordionTitleProps) => {\n      const { index } = titleProps;\n      const activeIndex = this.computeNewIndex(index);\n\n      this.setState({ activeIndex, focusedIndex: index });\n\n      _.invoke(this.props, 'onActiveIndexChange', e, { ...this.props, activeIndex });\n      _.invoke(predefinedProps, 'onClick', e, titleProps);\n      _.invoke(this.props, 'onTitleClick', e, titleProps);\n    },\n    onFocus: (e: React.SyntheticEvent, titleProps: AccordionTitleProps) => {\n      _.invoke(predefinedProps, 'onFocus', e, titleProps);\n      this.setState({ focusedIndex: predefinedProps.index });\n    },\n  });\n\n  isIndexActive = (index: number): boolean => {\n    const { exclusive } = this.props;\n    const { activeIndex } = this.state;\n\n    return exclusive ? activeIndex === index : _.includes(activeIndex as number[], index);\n  };\n\n  /**\n   * Checks if panel at index can be actioned upon. Used in the case of expanded accordion,\n   * when at least a panel needs to stay active. Will return false if expanded prop is true,\n   * index is active and either it's an exclusive accordion or if there are no other active\n   * panels open besides this one.\n   *\n   * @param index - The index of the panel.\n   * @returns If the panel can be set active/inactive.\n   */\n  isIndexActionable = (index: number): boolean => {\n    if (!this.isIndexActive(index)) {\n      return true;\n    }\n\n    const { activeIndex } = this.state;\n    const { expanded, exclusive } = this.props;\n\n    return !expanded || (!exclusive && (activeIndex as number[]).length > 1);\n  };\n\n  renderPanels = () => {\n    const children: any[] = [];\n    const { panels, renderPanelContent, renderPanelTitle } = this.props;\n    const { focusedIndex } = this.state;\n\n    this.itemRefs = [];\n    this.focusHandler.syncFocusedIndex(focusedIndex);\n\n    _.each(panels, (panel, index) => {\n      const { content, title } = panel;\n      const active = this.isIndexActive(index);\n      const canBeCollapsed = this.isIndexActionable(index);\n      const contentRef = React.createRef<HTMLElement>();\n      const titleId = title['id'] || `${this.defaultAccordionTitleId}${index}`;\n      const contentId = content['id'] || `${this.defaultAccordionContentId}${index}`;\n      this.itemRefs[index] = contentRef;\n\n      children.push(\n        AccordionTitle.create(title, {\n          defaultProps: () => ({\n            className: Accordion.slotClassNames.title,\n            active,\n            index,\n            contentRef,\n            canBeCollapsed,\n            id: titleId,\n            accordionContentId: contentId,\n          }),\n          overrideProps: this.handleTitleOverrides,\n          render: renderPanelTitle,\n        }),\n      );\n      children.push(\n        AccordionContent.create(content, {\n          defaultProps: () => ({\n            className: Accordion.slotClassNames.content,\n            active,\n            id: contentId,\n            accordionTitleId: titleId,\n          }),\n          render: renderPanelContent,\n        }),\n      );\n    });\n\n    return children;\n  };\n\n  renderComponent({ ElementType, classes, accessibility, unhandledProps }) {\n    const { children } = this.props;\n\n    return (\n      <ElementType\n        {...accessibility.attributes.root}\n        {...rtlTextContainer.getAttributes({ forElements: [children] })}\n        {...unhandledProps}\n        {...applyAccessibilityKeyHandlers(accessibility.keyHandlers.root, unhandledProps)}\n        className={classes.root}\n      >\n        {childrenExist(children) ? children : this.renderPanels()}\n      </ElementType>\n    );\n  }\n}\n\n/**\n * An Accordion represents stacked set of content sections, with action elements to toggle the display of these sections.\n *\n * @accessibility\n * Implements [ARIA Accordion](https://www.w3.org/TR/wai-aria-practices-1.1/#accordion) design pattern (keyboard navigation not yet supported).\n */\nexport default withSafeTypeForAs<typeof Accordion, AccordionProps>(Accordion);\n"],"file":"Accordion.js"}