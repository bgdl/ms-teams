{"version":3,"sources":["components/Animation/Animation.tsx"],"names":["useUnhandledProps","unstable_createAnimationStyles","createAnimationStyles","unstable_calculateAnimationTimeout","calculateAnimationTimeout","unstable_getStyles","getStyles","useTelemetry","cx","PropTypes","React","ThemeContext","Transition","childrenExist","commonPropTypes","Animation","props","context","useContext","displayName","telemetry","setStart","setEnd","appear","children","className","delay","direction","duration","fillMode","iterationCount","keyframeParams","mountOnEnter","name","playState","timeout","timingFunction","visible","unmountOnExit","handleAnimationEvent","event","useMemo","animation","displayNames","styles","theme","disableAnimations","renderer","rtl","performance","enableSanitizeCssPlugin","enableStylesCaching","enableVariablesCaching","enableBooleanVariablesCaching","saveDebug","classes","animationStyles","root","animationDuration","animationDelay","timeoutResult","unhandledProps","handledProps","isChildrenFunction","child","Children","only","element","propTypes","createCommon","accessibility","as","content","oneOfType","func","string","object","bool","number","shape","enter","exit","onEnter","onEntering","onEntered","onExit","onExiting","onExited","Object","keys"],"mappings":";;;;AAAA,SAEEA,iBAFF,EAGEC,8BAA8B,IAAIC,qBAHpC,EAIEC,kCAAkC,IAAIC,yBAJxC,EAKEC,kBAAkB,IAAIC,SALxB,EAMEC,YANF,QAOO,0BAPP;AAQA,OAAOC,EAAP,MAAe,YAAf;AAEA,OAAO,KAAKC,SAAZ,MAA2B,YAA3B;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB,C,CACA;;AACA,SAASC,YAAT,QAA6B,YAA7B;AACA,SAASC,UAAT,QAA2B,wBAA3B;AAEA,SAASC,aAAT,EAA8CC,eAA9C,QAA6F,aAA7F;;AA8HA;;;AAGA,IAAMC,SAGL,GAAG,SAHEA,SAGF,CAAAC,KAAK,EAAI;AAAA;;AACX,MAAMC,OAAgC,GAAGP,KAAK,CAACQ,UAAN,CAAiBP,YAAjB,CAAzC;;AADW,sBAEkBJ,YAAY,CAACQ,SAAS,CAACI,WAAX,EAAwBF,OAAO,CAACG,SAAhC,CAF9B;AAAA,MAEHC,QAFG,iBAEHA,QAFG;AAAA,MAEOC,MAFP,iBAEOA,MAFP;;AAGXD,EAAAA,QAAQ;AAHG,MAMTE,MANS,GAsBPP,KAtBO,CAMTO,MANS;AAAA,MAOTC,QAPS,GAsBPR,KAtBO,CAOTQ,QAPS;AAAA,MAQTC,SARS,GAsBPT,KAtBO,CAQTS,SARS;AAAA,MASTC,KATS,GAsBPV,KAtBO,CASTU,KATS;AAAA,MAUTC,SAVS,GAsBPX,KAtBO,CAUTW,SAVS;AAAA,MAWTC,QAXS,GAsBPZ,KAtBO,CAWTY,QAXS;AAAA,MAYTC,QAZS,GAsBPb,KAtBO,CAYTa,QAZS;AAAA,MAaTC,cAbS,GAsBPd,KAtBO,CAaTc,cAbS;AAAA,MAcTC,cAdS,GAsBPf,KAtBO,CAcTe,cAdS;AAAA,MAeTC,YAfS,GAsBPhB,KAtBO,CAeTgB,YAfS;AAAA,MAgBTC,IAhBS,GAsBPjB,KAtBO,CAgBTiB,IAhBS;AAAA,MAiBTC,SAjBS,GAsBPlB,KAtBO,CAiBTkB,SAjBS;AAAA,MAkBTC,OAlBS,GAsBPnB,KAtBO,CAkBTmB,OAlBS;AAAA,MAmBTC,cAnBS,GAsBPpB,KAtBO,CAmBToB,cAnBS;AAAA,MAoBTC,OApBS,GAsBPrB,KAtBO,CAoBTqB,OApBS;AAAA,MAqBTC,aArBS,GAsBPtB,KAtBO,CAqBTsB,aArBS;;AAwBX,MAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAC3BC,KAD2B;AAAA,WAExB,YAAM;AACT,cAASxB,KAAT,EAAgBwB,KAAhB,EAAuB,IAAvB,EAA6BxB,KAA7B;AACD,KAJ4B;AAAA,GAA7B;;AAxBW,uBA8BkCN,KAAK,CAAC+B,OAAN,CAAc,YAAM;AAC/D,QAAMC,SAAiC,GAAG;AACxCT,MAAAA,IAAI,EAAJA,IADwC;AAExCF,MAAAA,cAAc,EAAdA,cAFwC;AAGxCH,MAAAA,QAAQ,EAARA,QAHwC;AAIxCF,MAAAA,KAAK,EAALA,KAJwC;AAKxCI,MAAAA,cAAc,EAAdA,cALwC;AAMxCH,MAAAA,SAAS,EAATA,SANwC;AAOxCE,MAAAA,QAAQ,EAARA,QAPwC;AAQxCK,MAAAA,SAAS,EAATA,SARwC;AASxCE,MAAAA,cAAc,EAAdA;AATwC,KAA1C;AAYA,WAAO9B,SAAS,CAAC;AACfmB,MAAAA,SAAS,EAAEV,SAAS,CAACU,SADN;AAEfkB,MAAAA,YAAY,EAAE,CAAC5B,SAAS,CAACI,WAAX,CAFC;AAGfH,MAAAA,KAAK,EAAE;AACLS,QAAAA,SAAS,EAATA,SADK;AAELmB,QAAAA,MAAM,EAAE1C,qBAAqB,CAACwC,SAAD,EAAYzB,OAAO,CAAC4B,KAApB;AAFxB,OAHQ;AAQfC,MAAAA,iBAAiB,EAAE7B,OAAO,CAAC6B,iBARZ;AASfC,MAAAA,QAAQ,EAAE9B,OAAO,CAAC8B,QATH;AAUfC,MAAAA,GAAG,EAAE/B,OAAO,CAAC+B,GAVE;AAWfC,MAAAA,WAAW,EAAE;AACXC,QAAAA,uBAAuB,EAAE,KADd;AAEXC,QAAAA,mBAAmB,EAAE,KAFV;AAGXC,QAAAA,sBAAsB,EAAE,KAHb;AAIXC,QAAAA,6BAA6B,EAAE;AAJpB,OAXE;AAiBfC,MAAAA,SAAS,OAjBM;AAkBfT,MAAAA,KAAK,EAAE5B,OAAO,CAAC4B;AAlBA,KAAD,CAAhB;AAoBD,GAjC4C,EAiC1C,CACDpB,SADC,EAEDR,OAFC,EAGDgB,IAHC,EAIDP,KAJC,EAKDC,SALC,EAMDC,QANC,EAODC,QAPC,EAQDC,cARC,EASDC,cATC,EAUDG,SAVC,EAWDE,cAXC,CAjC0C,CA9BlC;AAAA,MA8BHmB,OA9BG,kBA8BHA,OA9BG;AAAA,MA8BcC,eA9Bd,kBA8BMZ,MA9BN;;AA6EX,MAAI,OAAQpB,QAAR,CAAJ,EAAuB;AACrBF,IAAAA,MAAM;AACN,WAAO,IAAP;AACD;;AAhFU,8BAkFmCkC,eAAe,CAACC,IAlFnD;AAAA,MAkFHC,iBAlFG,yBAkFHA,iBAlFG;AAAA,MAkFgBC,cAlFhB,yBAkFgBA,cAlFhB;AAmFX,MAAMC,aAAa,GAAGzB,OAAO,IAAI/B,yBAAyB,CAACsD,iBAAD,EAAoBC,cAApB,CAApC,IAA2E,CAAjG;AAEA,MAAME,cAAc,GAAG7D,iBAAiB,CAACe,SAAS,CAAC+C,YAAX,EAAyB9C,KAAzB,CAAxC;AAEA,MAAM+C,kBAAkB,GAAG,OAAOvC,QAAP,KAAoB,UAA/C;AACA,MAAMwC,KAAK,GAAGnD,aAAa,CAACW,QAAD,CAAb,IAA2B,CAACuC,kBAA5B,IAAmDrD,KAAK,CAACuD,QAAN,CAAeC,IAAf,CAAoB1C,QAApB,CAAjE;AAEA,MAAM2C,OAAO,GACX,oBAAC,UAAD;AACE,IAAA,EAAE,EAAE9B,OADN;AAEE,IAAA,MAAM,EAAEd,MAFV;AAGE,IAAA,YAAY,EAAES,YAHhB;AAIE,IAAA,aAAa,EAAEM,aAJjB;AAKE,IAAA,OAAO,EAAEsB,aALX;AAME,IAAA,OAAO,EAAErB,oBAAoB,CAAC,SAAD,CAN/B;AAOE,IAAA,UAAU,EAAEA,oBAAoB,CAAC,YAAD,CAPlC;AAQE,IAAA,SAAS,EAAEA,oBAAoB,CAAC,WAAD,CARjC;AASE,IAAA,MAAM,EAAEA,oBAAoB,CAAC,QAAD,CAT9B;AAUE,IAAA,SAAS,EAAEA,oBAAoB,CAAC,WAAD,CAVjC;AAWE,IAAA,QAAQ,EAAEA,oBAAoB,CAAC,UAAD;AAXhC,KAYMsB,cAZN;AAaE,IAAA,SAAS,EAAE,CAACE,kBAAD,GAAsBvD,EAAE,CAAC+C,OAAO,CAACE,IAAT,UAAgBO,KAAhB,uDAAe,KAAgBhD,KAA/B,+CAAe,WAAuBS,SAAtC,CAAxB,GAA2E;AAbxF,MAeGsC,kBAAkB,GAAG;AAAA,WAAOvC,QAAD,CAAoC;AAAE+B,MAAAA,OAAO,EAAEA,OAAO,CAACE;AAAnB,KAApC,CAAN;AAAA,GAAH,GAA0EO,KAf/F,CADF;AAmBA1C,EAAAA,MAAM;AAEN,SAAO6C,OAAP;AACD,CAnHD;;AAqHApD,SAAS,CAACU,SAAV,GAAsB,cAAtB;AACAV,SAAS,CAACI,WAAV,GAAwB,WAAxB;AAEAJ,SAAS,CAACqD,SAAV,qBACKtD,eAAe,CAACuD,YAAhB,CAA6B;AAC9BC,EAAAA,aAAa,EAAE,KADe;AAE9BC,EAAAA,EAAE,EAAE,KAF0B;AAG9BC,EAAAA,OAAO,EAAE,KAHqB;AAI9BhD,EAAAA,QAAQ,EAAE;AAJoB,CAA7B,CADL;AAOEA,EAAAA,QAAQ,EAAEf,SAAS,CAACgE,SAAV,CAAoB,CAAChE,SAAS,CAACiE,IAAX,EAAiBjE,SAAS,CAAC0D,OAA3B,CAApB,CAPZ;AAQElC,EAAAA,IAAI,EAAExB,SAAS,CAACkE,MARlB;AASEjD,EAAAA,KAAK,EAAEjB,SAAS,CAACkE,MATnB;AAUEhD,EAAAA,SAAS,EAAElB,SAAS,CAACkE,MAVvB;AAWE/C,EAAAA,QAAQ,EAAEnB,SAAS,CAACkE,MAXtB;AAYE9C,EAAAA,QAAQ,EAAEpB,SAAS,CAACkE,MAZtB;AAaE7C,EAAAA,cAAc,EAAErB,SAAS,CAACkE,MAb5B;AAcE5C,EAAAA,cAAc,EAAEtB,SAAS,CAACmE,MAd5B;AAeE1C,EAAAA,SAAS,EAAEzB,SAAS,CAACkE,MAfvB;AAgBEvC,EAAAA,cAAc,EAAE3B,SAAS,CAACkE,MAhB5B;AAiBEtC,EAAAA,OAAO,EAAE5B,SAAS,CAACoE,IAjBrB;AAkBEtD,EAAAA,MAAM,EAAEd,SAAS,CAACoE,IAlBpB;AAmBE7C,EAAAA,YAAY,EAAEvB,SAAS,CAACoE,IAnB1B;AAoBEvC,EAAAA,aAAa,EAAE7B,SAAS,CAACoE,IApB3B;AAqBE1C,EAAAA,OAAO,EAAE1B,SAAS,CAACgE,SAAV,CAAoB,CAC3BhE,SAAS,CAACqE,MADiB,EAE3BrE,SAAS,CAACsE,KAAV,CAAgB;AACdxD,IAAAA,MAAM,EAAEd,SAAS,CAACqE,MADJ;AAEdE,IAAAA,KAAK,EAAEvE,SAAS,CAACqE,MAFH;AAGdG,IAAAA,IAAI,EAAExE,SAAS,CAACqE;AAHF,GAAhB,CAF2B,CAApB,CArBX;AA6BEI,EAAAA,OAAO,EAAEzE,SAAS,CAACiE,IA7BrB;AA8BES,EAAAA,UAAU,EAAE1E,SAAS,CAACiE,IA9BxB;AA+BEU,EAAAA,SAAS,EAAE3E,SAAS,CAACiE,IA/BvB;AAgCEW,EAAAA,MAAM,EAAE5E,SAAS,CAACiE,IAhCpB;AAiCEY,EAAAA,SAAS,EAAE7E,SAAS,CAACiE,IAjCvB;AAkCEa,EAAAA,QAAQ,EAAE9E,SAAS,CAACiE;AAlCtB;AAoCA3D,SAAS,CAAC+C,YAAV,GAAyB0B,MAAM,CAACC,IAAP,CAAY1E,SAAS,CAACqD,SAAtB,CAAzB;AAEA,eAAerD,SAAf","sourcesContent":["import {\n  ComponentAnimationProp,\n  useUnhandledProps,\n  unstable_createAnimationStyles as createAnimationStyles,\n  unstable_calculateAnimationTimeout as calculateAnimationTimeout,\n  unstable_getStyles as getStyles,\n  useTelemetry,\n} from '@fluentui/react-bindings';\nimport cx from 'classnames';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n// @ts-ignore\nimport { ThemeContext } from 'react-fela';\nimport { Transition } from 'react-transition-group';\n\nimport { childrenExist, StyledComponentProps, commonPropTypes, ChildrenComponentProps } from '../../utils';\nimport { ComponentEventHandler, ProviderContextPrepared } from '../../types';\n\nexport type AnimationChildrenProp = (props: { classes: string }) => React.ReactNode;\n\nexport interface AnimationProps\n  extends StyledComponentProps,\n    ChildrenComponentProps<AnimationChildrenProp | React.ReactChild> {\n  /** Additional CSS class name(s) to apply.  */\n  className?: string;\n\n  /** The name for the animation that should be applied, defined in the theme. */\n  name?: string;\n\n  /** Specifies a delay for the start of an animation. Negative values are\n   * also allowed. If using negative values, the animation will start as if it had already been\n   * playing for that amount of time.\n   */\n  delay?: string;\n\n  /** Specifies whether an animation should be played forwards, backwards or in alternate cycles.\n   * It can have the following values:\n   * - normal (default) - The animation is played as normal (forwards)\n   * - reverse - The animation is played in reverse direction (backwards)\n   * - alternate - The animation is played forwards first, then backwards\n   * - alternate-reverse - The animation is played backwards first, then forwards\n   */\n  direction?: string;\n\n  /** Specifies how long an animation should take to complete. */\n  duration?: string;\n\n  /**\n   * Specifies a style for the target element when the animation is not playing (i.e. before it starts, after it ends, or both).\n   * It can have the following values:\n   * - none (default) - Animation will not apply any styles to the element before or after it is executing\n   * - forwards - The element will retain the style values that is set by the last keyframe (depends on animation-direction and animation-iteration-count)\n   * - backwards - The element will get the style values that is set by the first keyframe (depends on animation-direction), and retain this during the animation-delay period\n   * - both - The animation will follow the rules for both forwards and backwards, extending the animation properties in both directions\n   * */\n  fillMode?: string;\n\n  /** Specifies the number of times an animation should run. */\n  iterationCount?: string;\n\n  /** Custom parameters for the keyframe defined for the animation. */\n  keyframeParams?: object;\n\n  /**\n   * Specifies whether the animation is running or paused. It can have the following values:\n   * - paused - Specifies that the animation is paused\n   * - running - Default value. Specifies that the animation is running\n   * - initial - Sets this property to its default value.\n   * - inherit - Inherits this property from its parent element.\n   * */\n  playState?: string;\n\n  /**\n   * Specifies the speed curve of the animation. It can have the following values:\n   * - ease - Specifies an animation with a slow start, then fast, then end slowly (this is default)\n   * - linear - Specifies an animation with the same speed from start to end\n   * - ease-in - Specifies an animation with a slow start\n   * - ease-out - Specifies an animation with a slow end\n   * - ease-in-out - Specifies an animation with a slow start and end\n   * - cubic-bezier(n,n,n,n) - Lets you define your own values in a cubic-bezier function\n   */\n  timingFunction?: string;\n\n  /** Show the component; triggers the enter or exit animation. */\n  visible?: boolean;\n\n  /** Run the enter animation when the component mounts, if it is initially shown. */\n  appear?: boolean;\n\n  /** Wait until the first \"enter\" transition to mount the component (add it to the DOM). */\n  mountOnEnter?: boolean;\n\n  /** Unmount the component (remove it from the DOM) when it is not shown. */\n  unmountOnExit?: boolean;\n\n  /** The duration of the transition, in milliseconds. */\n  timeout?: number | { enter?: number; exit?: number; appear?: number };\n\n  /**\n   * Callback fired before the \"entering\" status is applied.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onEnter?: ComponentEventHandler<AnimationProps>;\n\n  /**\n   * Callback fired after the \"entering\" status is applied.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onEntering?: ComponentEventHandler<AnimationProps>;\n\n  /**\n   * Callback fired after the \"entered\" status is applied.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onEntered?: ComponentEventHandler<AnimationProps>;\n\n  /**\n   * Callback fired before the \"exiting\" status is applied.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onExit?: ComponentEventHandler<AnimationProps>;\n\n  /**\n   * Callback fired after the \"exiting\" status is applied.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onExiting?: ComponentEventHandler<AnimationProps>;\n\n  /**\n   * Callback fired after the \"exited\" status is applied.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onExited?: ComponentEventHandler<AnimationProps>;\n}\n\n/**\n * An Animation provides animation effects to rendered elements.\n */\nconst Animation: React.FC<AnimationProps> & {\n  className: string;\n  handledProps: (keyof AnimationProps)[];\n} = props => {\n  const context: ProviderContextPrepared = React.useContext(ThemeContext);\n  const { setStart, setEnd } = useTelemetry(Animation.displayName, context.telemetry);\n  setStart();\n\n  const {\n    appear,\n    children,\n    className,\n    delay,\n    direction,\n    duration,\n    fillMode,\n    iterationCount,\n    keyframeParams,\n    mountOnEnter,\n    name,\n    playState,\n    timeout,\n    timingFunction,\n    visible,\n    unmountOnExit,\n  } = props;\n\n  const handleAnimationEvent = (\n    event: 'onEnter' | 'onEntering' | 'onEntered' | 'onExit' | 'onExiting' | 'onExited',\n  ) => () => {\n    _.invoke(props, event, null, props);\n  };\n\n  const { classes, styles: animationStyles } = React.useMemo(() => {\n    const animation: ComponentAnimationProp = {\n      name,\n      keyframeParams,\n      duration,\n      delay,\n      iterationCount,\n      direction,\n      fillMode,\n      playState,\n      timingFunction,\n    };\n\n    return getStyles({\n      className: Animation.className,\n      displayNames: [Animation.displayName],\n      props: {\n        className,\n        styles: createAnimationStyles(animation, context.theme),\n      },\n\n      disableAnimations: context.disableAnimations,\n      renderer: context.renderer,\n      rtl: context.rtl,\n      performance: {\n        enableSanitizeCssPlugin: false,\n        enableStylesCaching: false,\n        enableVariablesCaching: false,\n        enableBooleanVariablesCaching: false,\n      },\n      saveDebug: _.noop,\n      theme: context.theme,\n    });\n  }, [\n    className,\n    context,\n    name,\n    delay,\n    direction,\n    duration,\n    fillMode,\n    iterationCount,\n    keyframeParams,\n    playState,\n    timingFunction,\n  ]);\n\n  if (_.isNil(children)) {\n    setEnd();\n    return null;\n  }\n\n  const { animationDuration, animationDelay } = animationStyles.root;\n  const timeoutResult = timeout || calculateAnimationTimeout(animationDuration, animationDelay) || 0;\n\n  const unhandledProps = useUnhandledProps(Animation.handledProps, props);\n\n  const isChildrenFunction = typeof children === 'function';\n  const child = childrenExist(children) && !isChildrenFunction && (React.Children.only(children) as React.ReactElement);\n\n  const element = (\n    <Transition\n      in={visible}\n      appear={appear}\n      mountOnEnter={mountOnEnter}\n      unmountOnExit={unmountOnExit}\n      timeout={timeoutResult}\n      onEnter={handleAnimationEvent('onEnter')}\n      onEntering={handleAnimationEvent('onEntering')}\n      onEntered={handleAnimationEvent('onEntered')}\n      onExit={handleAnimationEvent('onExit')}\n      onExiting={handleAnimationEvent('onExiting')}\n      onExited={handleAnimationEvent('onExited')}\n      {...unhandledProps}\n      className={!isChildrenFunction ? cx(classes.root, (child as any)?.props?.className) : ''}\n    >\n      {isChildrenFunction ? () => (children as AnimationChildrenProp)({ classes: classes.root }) : child}\n    </Transition>\n  );\n  setEnd();\n\n  return element;\n};\n\nAnimation.className = 'ui-animation';\nAnimation.displayName = 'Animation';\n\nAnimation.propTypes = {\n  ...commonPropTypes.createCommon({\n    accessibility: false,\n    as: false,\n    content: false,\n    children: false,\n  }),\n  children: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n  name: PropTypes.string,\n  delay: PropTypes.string,\n  direction: PropTypes.string,\n  duration: PropTypes.string,\n  fillMode: PropTypes.string,\n  iterationCount: PropTypes.string,\n  keyframeParams: PropTypes.object,\n  playState: PropTypes.string,\n  timingFunction: PropTypes.string,\n  visible: PropTypes.bool,\n  appear: PropTypes.bool,\n  mountOnEnter: PropTypes.bool,\n  unmountOnExit: PropTypes.bool,\n  timeout: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.shape({\n      appear: PropTypes.number,\n      enter: PropTypes.number,\n      exit: PropTypes.number,\n    }),\n  ]),\n  onEnter: PropTypes.func,\n  onEntering: PropTypes.func,\n  onEntered: PropTypes.func,\n  onExit: PropTypes.func,\n  onExiting: PropTypes.func,\n  onExited: PropTypes.func,\n};\nAnimation.handledProps = Object.keys(Animation.propTypes) as any;\n\nexport default Animation;\n"],"file":"Animation.js"}