{"ast":null,"code":"import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (node === null) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n/**\n * This return a function that will call all the given functions with\n * the arguments with which it's called. It does a null-check before\n * attempting to call the functions and can take any number of functions.\n * @param {...Function} fns the functions to call\n * @return {Function} the function that calls all the functions\n */\n\n\nfunction callAll() {\n  for (var _len4 = arguments.length, fns = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    fns[_key4] = arguments[_key4];\n  }\n\n  return function () {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    fns.forEach(function (fn) {\n      if (fn) {\n        fn.apply(void 0, args);\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      selectedItem = _ref2.selectedItem,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount,\n      itemToString = _ref2.itemToString;\n\n  if (!isOpen) {\n    return selectedItem ? itemToString(selectedItem) : '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount) {\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = itemsLastIndex;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = 0;\n  }\n\n  return newIndex;\n}\n\nvar statusDiv;\nvar cleanupStatus = debounce(function () {\n  getStatusDiv().textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus();\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Downshift, _Component);\n\n  function Downshift(_props) {\n    var _this = _Component.call(this, _props) || this;\n\n    _this.id = _this.props.id || \"downshift-\" + generateId();\n    _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n    _this.labelId = _this.props.labelId || _this.id + \"-label\";\n    _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n    _this.getItemId = _this.props.getItemId || function (index) {\n      return _this.id + \"-item-\" + index;\n    };\n\n    _this.input = null;\n    _this.items = [];\n    _this.itemCount = null;\n    _this.previousResultCount = 0;\n    _this.timeoutIds = [];\n\n    _this.internalSetTimeout = function (fn, time) {\n      var id = setTimeout(function () {\n        _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n          return i !== id;\n        });\n        fn();\n      }, time);\n\n      _this.timeoutIds.push(id);\n    };\n\n    _this.setItemCount = function (count) {\n      _this.itemCount = count;\n    };\n\n    _this.unsetItemCount = function () {\n      _this.itemCount = null;\n    };\n\n    _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n      if (highlightedIndex === void 0) {\n        highlightedIndex = _this.props.defaultHighlightedIndex;\n      }\n\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        highlightedIndex: highlightedIndex\n      }, otherStateToSet));\n    };\n\n    _this.clearSelection = function (cb) {\n      _this.internalSetState({\n        selectedItem: null,\n        inputValue: '',\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        isOpen: _this.props.defaultIsOpen\n      }, cb);\n    };\n\n    _this.selectItem = function (item, otherStateToSet, cb) {\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        isOpen: _this.props.defaultIsOpen,\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        selectedItem: item,\n        inputValue: _this.props.itemToString(item)\n      }, otherStateToSet), cb);\n    };\n\n    _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n      var item = _this.items[itemIndex];\n\n      if (item == null) {\n        return;\n      }\n\n      _this.selectItem(item, otherStateToSet, cb);\n    };\n\n    _this.selectHighlightedItem = function (otherStateToSet, cb) {\n      return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n    };\n\n    _this.internalSetState = function (stateToSet, cb) {\n      var isItemSelected, onChangeArg;\n      var onStateChangeArg = {};\n      var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n      // so someone controlling the `inputValue` state gets notified of\n      // the input change as soon as possible. This avoids issues with\n      // preserving the cursor position.\n      // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n      if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n        _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, stateToSet));\n      }\n\n      return _this.setState(function (state) {\n        state = _this.getState(state);\n        var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n        newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n        // what was selected before\n        // used to determine if onSelect and onChange callbacks should be called\n\n        isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n        var nextState = {}; // this is just used to tell whether the state changed\n\n        var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n        // and we're trying to update that state. OR if the selection has changed and we're\n        // trying to update the selection\n\n        if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n          onChangeArg = newStateToSet.selectedItem;\n        }\n\n        newStateToSet.type = newStateToSet.type || unknown;\n        Object.keys(newStateToSet).forEach(function (key) {\n          // onStateChangeArg should only have the state that is\n          // actually changing\n          if (state[key] !== newStateToSet[key]) {\n            onStateChangeArg[key] = newStateToSet[key];\n          } // the type is useful for the onStateChangeArg\n          // but we don't actually want to set it in internal state.\n          // this is an undocumented feature for now... Not all internalSetState\n          // calls support it and I'm not certain we want them to yet.\n          // But it enables users controlling the isOpen state to know when\n          // the isOpen state changes due to mouseup events which is quite handy.\n\n\n          if (key === 'type') {\n            return;\n          }\n\n          nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n          if (!_this.isControlledProp(key)) {\n            nextState[key] = newStateToSet[key];\n          }\n        }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n        // earlier, so we'll call it now that we know what the inputValue state will be.\n\n        if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, newStateToSet));\n        }\n\n        return nextState;\n      }, function () {\n        // call the provided callback if it's a function\n        cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n        // we have relevant information to pass them.\n\n        var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n        if (hasMoreStateThanType) {\n          _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n        }\n\n        if (isItemSelected) {\n          _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n        }\n\n        if (onChangeArg !== undefined) {\n          _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n        } // this is currently undocumented and therefore subject to change\n        // We'll try to not break it, but just be warned.\n\n\n        _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n      });\n    };\n\n    _this.rootRef = function (node) {\n      return _this._rootNode = node;\n    };\n\n    _this.getRootProps = function (_temp, _temp2) {\n      var _extends2;\n\n      var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\", \"ref\"]);\n\n      var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro; // this is used in the render to know whether the user has called getRootProps.\n      // It uses that to know whether to apply the props automatically\n\n\n      _this.getRootProps.called = true;\n      _this.getRootProps.refKey = refKey;\n      _this.getRootProps.suppressRefError = suppressRefError;\n\n      var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n\n      return _extends((_extends2 = {}, _extends2[refKey] = callAll(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n    };\n\n    _this.keyDownHandlers = {\n      ArrowDown: function ArrowDown(event) {\n        var _this2 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? 5 : 1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowDown\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowDown\n          }, function () {\n            var itemCount = _this2.getItemCount();\n\n            if (itemCount > 0) {\n              _this2.setHighlightedIndex(getNextWrappingIndex(1, _this2.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      ArrowUp: function ArrowUp(event) {\n        var _this3 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? -5 : -1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowUp\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowUp\n          }, function () {\n            var itemCount = _this3.getItemCount();\n\n            if (itemCount > 0) {\n              _this3.setHighlightedIndex(getNextWrappingIndex(-1, _this3.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n\n        if (isOpen && highlightedIndex != null) {\n          event.preventDefault();\n          var item = this.items[highlightedIndex];\n          var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n          if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n            return;\n          }\n\n          this.selectHighlightedItem({\n            type: keyDownEnter\n          });\n        }\n      },\n      Escape: function Escape(event) {\n        event.preventDefault();\n        this.reset({\n          type: keyDownEscape,\n          selectedItem: null,\n          inputValue: ''\n        });\n      }\n    };\n    _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      ' ': function _(event) {\n        event.preventDefault();\n        this.toggleMenu({\n          type: keyDownSpaceButton\n        });\n      }\n    });\n    _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      Home: function Home(event) {\n        this.highlightFirstOrLastIndex(event, true, {\n          type: keyDownHome\n        });\n      },\n      End: function End(event) {\n        this.highlightFirstOrLastIndex(event, false, {\n          type: keyDownEnd\n        });\n      }\n    });\n\n    _this.getToggleButtonProps = function (_temp3) {\n      var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick,\n          onPress = _ref3.onPress,\n          onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n      var _this$getState3 = _this.getState(),\n          isOpen = _this$getState3.isOpen;\n\n      var enabledEventHandlers = {\n        onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n        onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n        onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n        onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n      };\n      var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n      return _extends({\n        type: 'button',\n        role: 'button',\n        'aria-label': isOpen ? 'close menu' : 'open menu',\n        'aria-haspopup': true,\n        'data-toggle': true\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.buttonHandleKeyUp = function (event) {\n      // Prevent click event from emitting in Firefox\n      event.preventDefault();\n    };\n\n    _this.buttonHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (_this.buttonKeyDownHandlers[key]) {\n        _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.buttonHandleClick = function (event) {\n      event.preventDefault(); // handle odd case for Safari and Firefox which\n      // don't give the button the focus properly.\n\n      /* istanbul ignore if (can't reasonably test this) */\n\n      if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n        event.target.focus();\n      } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n      // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n      // when building for production and should therefore have no impact on production code.\n\n\n      if (process.env.NODE_ENV === 'test') {\n        _this.toggleMenu({\n          type: clickButton\n        });\n      } else {\n        // Ensure that toggle of menu occurs after the potential blur event in iOS\n        _this.internalSetTimeout(function () {\n          return _this.toggleMenu({\n            type: clickButton\n          });\n        });\n      }\n    };\n\n    _this.buttonHandleBlur = function (event) {\n      var blurTarget = event.target; // Save blur target for comparison with activeElement later\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n      _this.internalSetTimeout(function () {\n        if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n        ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n      });\n    };\n\n    _this.getLabelProps = function (props) {\n      return _extends({\n        htmlFor: _this.inputId,\n        id: _this.labelId\n      }, props);\n    };\n\n    _this.getInputProps = function (_temp4) {\n      var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput,\n          onChangeText = _ref4.onChangeText,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n      var onChangeKey;\n      var eventHandlers = {};\n      /* istanbul ignore next (preact) */\n\n      onChangeKey = 'onChange';\n\n      var _this$getState4 = _this.getState(),\n          inputValue = _this$getState4.inputValue,\n          isOpen = _this$getState4.isOpen,\n          highlightedIndex = _this$getState4.highlightedIndex;\n\n      if (!rest.disabled) {\n        var _eventHandlers;\n\n        eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      return _extends({\n        'aria-autocomplete': 'list',\n        'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n        'aria-controls': isOpen ? _this.menuId : null,\n        'aria-labelledby': _this.labelId,\n        // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n        // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n        autoComplete: 'off',\n        value: inputValue,\n        id: _this.inputId\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.inputHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && _this.inputKeyDownHandlers[key]) {\n        _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.inputHandleChange = function (event) {\n      _this.internalSetState({\n        type: changeInput,\n        isOpen: true,\n        inputValue: event.target.value,\n        highlightedIndex: _this.props.defaultHighlightedIndex\n      });\n    };\n\n    _this.inputHandleBlur = function () {\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n      _this.internalSetTimeout(function () {\n        var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n        if (!_this.isMouseDown && !downshiftButtonIsActive) {\n          _this.reset({\n            type: blurInput\n          });\n        }\n      });\n    };\n\n    _this.menuRef = function (node) {\n      _this._menuNode = node;\n    };\n\n    _this.getMenuProps = function (_temp5, _temp6) {\n      var _extends3;\n\n      var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n      var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n      _this.getMenuProps.called = true;\n      _this.getMenuProps.refKey = refKey;\n      _this.getMenuProps.suppressRefError = suppressRefError;\n      return _extends((_extends3 = {}, _extends3[refKey] = callAll(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n    };\n\n    _this.getItemProps = function (_temp7) {\n      var _enabledEventHandlers;\n\n      var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick,\n          onPress = _ref7.onPress,\n          index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n      /* istanbul ignore next */\n      undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n      if (index === undefined) {\n        _this.items.push(item);\n\n        index = _this.items.indexOf(item);\n      } else {\n        _this.items[index] = item;\n      }\n\n      var onSelectKey = 'onClick';\n      var customClickHandler = onClick;\n      var enabledEventHandlers = (_enabledEventHandlers = {\n        // onMouseMove is used over onMouseEnter here. onMouseMove\n        // is only triggered on actual mouse movement while onMouseEnter\n        // can fire on DOM changes, interrupting keyboard navigation\n        onMouseMove: callAllEventHandlers(onMouseMove, function () {\n          if (index === _this.getState().highlightedIndex) {\n            return;\n          }\n\n          _this.setHighlightedIndex(index, {\n            type: itemMouseEnter\n          }); // We never want to manually scroll when changing state based\n          // on `onMouseMove` because we will be moving the element out\n          // from under the user which is currently scrolling/moving the\n          // cursor\n\n\n          _this.avoidScrolling = true;\n\n          _this.internalSetTimeout(function () {\n            return _this.avoidScrolling = false;\n          }, 250);\n        }),\n        onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n          // This prevents the activeElement from being changed\n          // to the item so it can remain with the current activeElement\n          // which is a more common use case.\n          event.preventDefault();\n        })\n      }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n        _this.selectItemAtIndex(index, {\n          type: clickItem\n        });\n      }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n      // of the activeElement if clicking on disabled items\n\n      var eventHandlers = rest.disabled ? {\n        onMouseDown: enabledEventHandlers.onMouseDown\n      } : enabledEventHandlers;\n      return _extends({\n        id: _this.getItemId(index),\n        role: 'option',\n        'aria-selected': _this.getState().highlightedIndex === index\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.clearItems = function () {\n      _this.items = [];\n    };\n\n    _this.reset = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref8) {\n        var selectedItem = _ref8.selectedItem;\n        return _extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          inputValue: _this.props.itemToString(selectedItem)\n        }, otherStateToSet);\n      }, cb);\n    };\n\n    _this.toggleMenu = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref9) {\n        var isOpen = _ref9.isOpen;\n        return _extends({\n          isOpen: !isOpen\n        }, isOpen && {\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        }, {}, otherStateToSet);\n      }, function () {\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen,\n            highlightedIndex = _this$getState5.highlightedIndex;\n\n        if (isOpen) {\n          if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n            _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n          }\n        }\n\n        cbToCb(cb)();\n      });\n    };\n\n    _this.openMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: true\n      }, cb);\n    };\n\n    _this.closeMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: false\n      }, cb);\n    };\n\n    _this.updateStatus = debounce(function () {\n      var state = _this.getState();\n\n      var item = _this.items[state.highlightedIndex];\n\n      var resultCount = _this.getItemCount();\n\n      var status = _this.props.getA11yStatusMessage(_extends({\n        itemToString: _this.props.itemToString,\n        previousResultCount: _this.previousResultCount,\n        resultCount: resultCount,\n        highlightedItem: item\n      }, state));\n\n      _this.previousResultCount = resultCount;\n      setStatus(status, _this.props.environment.document);\n    }, 200); // fancy destructuring + defaults + aliases\n    // this basically says each value of state should either be set to\n    // the initial value or the default value if the initial value is not provided\n\n    var _this$props = _this.props,\n        defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n        _this$props$initialHi = _this$props.initialHighlightedIndex,\n        _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n        defaultIsOpen = _this$props.defaultIsOpen,\n        _this$props$initialIs = _this$props.initialIsOpen,\n        _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n        _this$props$initialIn = _this$props.initialInputValue,\n        _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n        _this$props$initialSe = _this$props.initialSelectedItem,\n        _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n    var _state = _this.getState({\n      highlightedIndex: _highlightedIndex,\n      isOpen: _isOpen,\n      inputValue: _inputValue,\n      selectedItem: _selectedItem\n    });\n\n    if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n      _state.inputValue = _this.props.itemToString(_state.selectedItem);\n    }\n\n    _this.state = _state;\n    return _this;\n  }\n\n  var _proto = Downshift.prototype;\n  /**\n   * Clear all running timeouts\n   */\n\n  _proto.internalClearTimeouts = function internalClearTimeouts() {\n    this.timeoutIds.forEach(function (id) {\n      clearTimeout(id);\n    });\n    this.timeoutIds = [];\n  }\n  /**\n   * Gets the state based on internal state or props\n   * If a state value is passed via props, then that\n   * is the value given, otherwise it's retrieved from\n   * stateToMerge\n   *\n   * This will perform a shallow merge of the given state object\n   * with the state coming from props\n   * (for the controlled component scenario)\n   * This is used in state updater functions so they're referencing\n   * the right state regardless of where it comes from.\n   *\n   * @param {Object} stateToMerge defaults to this.state\n   * @return {Object} the state\n   */\n  ;\n\n  _proto.getState = function getState(stateToMerge) {\n    var _this4 = this;\n\n    if (stateToMerge === void 0) {\n      stateToMerge = this.state;\n    }\n\n    return Object.keys(stateToMerge).reduce(function (state, key) {\n      state[key] = _this4.isControlledProp(key) ? _this4.props[key] : stateToMerge[key];\n      return state;\n    }, {});\n  }\n  /**\n   * This determines whether a prop is a \"controlled prop\" meaning it is\n   * state which is controlled by the outside of this component rather\n   * than within this component.\n   * @param {String} key the key to check\n   * @return {Boolean} whether it is a controlled controlled prop\n   */\n  ;\n\n  _proto.isControlledProp = function isControlledProp(key) {\n    return this.props[key] !== undefined;\n  };\n\n  _proto.getItemCount = function getItemCount() {\n    // things read better this way. They're in priority order:\n    // 1. `this.itemCount`\n    // 2. `this.props.itemCount`\n    // 3. `this.items.length`\n    var itemCount = this.items.length;\n\n    if (this.itemCount != null) {\n      itemCount = this.itemCount;\n    } else if (this.props.itemCount !== undefined) {\n      itemCount = this.props.itemCount;\n    }\n\n    return itemCount;\n  };\n\n  _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n    return this.props.environment.document.getElementById(this.getItemId(index));\n  };\n\n  _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n    /* istanbul ignore else (react-native) */\n    {\n      var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n      this.props.scrollIntoView(node, this._menuNode);\n    }\n  };\n\n  _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n    var itemCount = this.getItemCount();\n\n    if (itemCount > 0) {\n      var nextHighlightedIndex = getNextWrappingIndex(amount, this.getState().highlightedIndex, itemCount);\n      this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n    }\n  };\n\n  _proto.highlightFirstOrLastIndex = function highlightFirstOrLastIndex(event, first, otherStateToSet) {\n    var itemsLastIndex = this.getItemCount() - 1;\n\n    if (itemsLastIndex < 0 || !this.getState().isOpen) {\n      return;\n    }\n\n    event.preventDefault();\n    this.setHighlightedIndex(first ? 0 : itemsLastIndex, otherStateToSet);\n  };\n\n  _proto.getStateAndHelpers = function getStateAndHelpers() {\n    var _this$getState6 = this.getState(),\n        highlightedIndex = _this$getState6.highlightedIndex,\n        inputValue = _this$getState6.inputValue,\n        selectedItem = _this$getState6.selectedItem,\n        isOpen = _this$getState6.isOpen;\n\n    var itemToString = this.props.itemToString;\n    var id = this.id;\n    var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n    return {\n      // prop getters\n      getRootProps: getRootProps,\n      getToggleButtonProps: getToggleButtonProps,\n      getLabelProps: getLabelProps,\n      getMenuProps: getMenuProps,\n      getInputProps: getInputProps,\n      getItemProps: getItemProps,\n      // actions\n      reset: reset,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      toggleMenu: toggleMenu,\n      selectItem: selectItem,\n      selectItemAtIndex: selectItemAtIndex,\n      selectHighlightedItem: selectHighlightedItem,\n      setHighlightedIndex: setHighlightedIndex,\n      clearSelection: clearSelection,\n      clearItems: clearItems,\n      setItemCount: setItemCount,\n      unsetItemCount: unsetItemCount,\n      setState: setState,\n      // props\n      itemToString: itemToString,\n      // derived\n      id: id,\n      // state\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      selectedItem: selectedItem\n    };\n  } //////////////////////////// ROOT\n  ;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this5 = this;\n    /* istanbul ignore if (react-native) */\n\n\n    if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n      validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n    }\n    /* istanbul ignore if (react-native) */\n\n\n    {\n      var targetWithinDownshift = function (target, checkActiveElement) {\n        if (checkActiveElement === void 0) {\n          checkActiveElement = true;\n        }\n\n        var document = _this5.props.environment.document;\n        return [_this5._rootNode, _this5._menuNode].some(function (contextNode) {\n          return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n        });\n      }; // this.isMouseDown helps us track whether the mouse is currently held down.\n      // This is useful when the user clicks on an item in the list, but holds the mouse\n      // down long enough for the list to disappear (because the blur event fires on the input)\n      // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n      // trigger hiding the menu.\n\n\n      var onMouseDown = function () {\n        _this5.isMouseDown = true;\n      };\n\n      var onMouseUp = function (event) {\n        _this5.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n        // then we don't want to reset downshift\n\n        var contextWithinDownshift = targetWithinDownshift(event.target);\n\n        if (!contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: mouseUp\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      }; // Touching an element in iOS gives focus and hover states, but touching out of\n      // the element will remove hover, and persist the focus state, resulting in the\n      // blur event not being triggered.\n      // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n      // If the user taps outside of Downshift, the component should be reset,\n      // but not if the user is swiping\n\n\n      var onTouchStart = function () {\n        _this5.isTouchMove = false;\n      };\n\n      var onTouchMove = function () {\n        _this5.isTouchMove = true;\n      };\n\n      var onTouchEnd = function (event) {\n        var contextWithinDownshift = targetWithinDownshift(event.target, false);\n\n        if (!_this5.isTouchMove && !contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: touchEnd\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      };\n\n      var environment = this.props.environment;\n      environment.addEventListener('mousedown', onMouseDown);\n      environment.addEventListener('mouseup', onMouseUp);\n      environment.addEventListener('touchstart', onTouchStart);\n      environment.addEventListener('touchmove', onTouchMove);\n      environment.addEventListener('touchend', onTouchEnd);\n\n      this.cleanup = function () {\n        _this5.internalClearTimeouts();\n\n        _this5.updateStatus.cancel();\n\n        environment.removeEventListener('mousedown', onMouseDown);\n        environment.removeEventListener('mouseup', onMouseUp);\n        environment.removeEventListener('touchstart', onTouchStart);\n        environment.removeEventListener('touchmove', onTouchMove);\n        environment.removeEventListener('touchend', onTouchEnd);\n      };\n    }\n  };\n\n  _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n    var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref10.highlightedIndex;\n\n    var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref11.highlightedIndex;\n\n    var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n    return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (process.env.NODE_ENV !== 'production') {\n      validateControlledUnchanged(prevProps, this.props);\n      /* istanbul ignore if (react-native) */\n\n      if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n    }\n\n    if (this.isControlledProp('selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n      this.internalSetState({\n        type: controlledPropUpdatedSelectedItem,\n        inputValue: this.props.itemToString(this.props.selectedItem)\n      });\n    }\n\n    if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n      this.scrollHighlightedItemIntoView();\n    }\n    /* istanbul ignore else (react-native) */\n\n\n    this.updateStatus();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.cleanup(); // avoids memory leak\n  };\n\n  _proto.render = function render() {\n    var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n    // we clear this out each render and it will be populated again as\n    // getItemProps is called.\n\n    this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n    // this render. If they do then we don't need to do anything,\n    // if they don't then we need to clone the element they return and\n    // apply the props for them.\n\n    this.getRootProps.called = false;\n    this.getRootProps.refKey = undefined;\n    this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n    this.getMenuProps.called = false;\n    this.getMenuProps.refKey = undefined;\n    this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n    this.getLabelProps.called = false; // and something similar for getInputProps\n\n    this.getInputProps.called = false;\n    var element = unwrapArray(children(this.getStateAndHelpers()));\n\n    if (!element) {\n      return null;\n    }\n\n    if (this.getRootProps.called || this.props.suppressRefError) {\n      if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n        validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n      }\n\n      return element;\n    } else if (isDOMElement(element)) {\n      // they didn't apply the root props, but we can clone\n      // this and apply the props ourselves\n      return React.cloneElement(element, this.getRootProps(getElementProps(element)));\n    }\n    /* istanbul ignore else */\n\n\n    if (process.env.NODE_ENV !== 'production') {\n      // they didn't apply the root props, but they need to\n      // otherwise we can't query around the autocomplete\n      throw new Error('downshift: If you return a non-DOM element, you must use apply the getRootProps function');\n    }\n    /* istanbul ignore next */\n\n\n    return undefined;\n  };\n\n  return Downshift;\n}(Component);\n\nDownshift.defaultProps = {\n  defaultHighlightedIndex: null,\n  defaultIsOpen: false,\n  getA11yStatusMessage: getA11yStatusMessage,\n  itemToString: function itemToString(i) {\n    if (i == null) {\n      return '';\n    }\n\n    if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n      // eslint-disable-next-line no-console\n      console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n    }\n\n    return String(i);\n  },\n  onStateChange: noop,\n  onInputValueChange: noop,\n  onUserAction: noop,\n  onChange: noop,\n  onSelect: noop,\n  onOuterClick: noop,\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window,\n  stateReducer: function stateReducer(state, stateToSet) {\n    return stateToSet;\n  },\n  suppressRefError: false,\n  scrollIntoView: scrollIntoView\n};\nDownshift.stateChangeTypes = stateChangeTypes;\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nfunction validateControlledUnchanged(prevProps, nextProps) {\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  ['selectedItem', 'isOpen', 'inputValue', 'highlightedIndex'].forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nexport default Downshift;\nexport { resetIdCounter };","map":{"version":3,"sources":["/Users/bogdanluca/moqups/ms-teams/node_modules/downshift/dist/downshift.esm.js"],"names":["_objectWithoutPropertiesLoose","_extends","_assertThisInitialized","_inheritsLoose","PropTypes","React","Component","isForwardRef","computeScrollIntoView","idCounter","cbToCb","cb","noop","scrollIntoView","node","menuNode","actions","boundary","block","scrollMode","forEach","_ref","el","top","left","scrollTop","scrollLeft","isOrContainsNode","parent","child","contains","debounce","fn","time","timeoutId","cancel","clearTimeout","wrapper","_len","arguments","length","args","Array","_key","setTimeout","apply","callAllEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","concat","preventDownshiftDefault","hasOwnProperty","nativeEvent","callAll","_len4","_key4","_len5","_key5","generateId","String","resetIdCounter","getA11yStatusMessage","_ref2","isOpen","selectedItem","resultCount","previousResultCount","itemToString","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","type","getElementProps","props","requiredProp","fnName","propName","console","error","stateKeys","pickState","state","result","k","normalizeArrowKey","key","keyCode","indexOf","isPlainObject","obj","Object","prototype","toString","call","getNextWrappingIndex","moveAmount","baseIndex","itemCount","itemsLastIndex","newIndex","statusDiv","cleanupStatus","getStatusDiv","textContent","setStatus","status","documentProp","div","document","createElement","setAttribute","assign","style","border","clip","height","margin","overflow","padding","position","width","body","appendChild","unknown","process","env","NODE_ENV","mouseUp","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","keyDownHome","keyDownEnd","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","controlledPropUpdatedSelectedItem","touchEnd","stateChangeTypes","freeze","Downshift","_Component","_props","_this","id","menuId","labelId","inputId","getItemId","index","input","items","timeoutIds","internalSetTimeout","filter","i","push","setItemCount","count","unsetItemCount","setHighlightedIndex","highlightedIndex","otherStateToSet","defaultHighlightedIndex","internalSetState","clearSelection","inputValue","defaultIsOpen","selectItem","item","selectItemAtIndex","itemIndex","selectHighlightedItem","getState","stateToSet","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","onInputValueChange","getStateAndHelpers","setState","newStateToSet","stateReducer","nextState","nextFullState","keys","isControlledProp","hasMoreStateThanType","onStateChange","onSelect","undefined","onChange","onUserAction","rootRef","_rootNode","getRootProps","_temp","_temp2","_extends2","_ref$refKey","refKey","ref","rest","_ref2$suppressRefErro","suppressRefError","called","_this$getState","role","keyDownHandlers","ArrowDown","_this2","preventDefault","amount","shiftKey","moveHighlightedIndex","getItemCount","ArrowUp","_this3","Enter","_this$getState2","itemNode","getItemNodeFromIndex","hasAttribute","Escape","reset","buttonKeyDownHandlers","_","toggleMenu","inputKeyDownHandlers","Home","highlightFirstOrLastIndex","End","getToggleButtonProps","_temp3","_ref3","onClick","onPress","onKeyDown","onKeyUp","onBlur","_this$getState3","enabledEventHandlers","buttonHandleClick","buttonHandleKeyDown","buttonHandleKeyUp","buttonHandleBlur","eventHandlers","disabled","environment","activeElement","target","focus","blurTarget","isMouseDown","getLabelProps","htmlFor","getInputProps","_temp4","_ref4","onInput","onChangeText","onChangeKey","_this$getState4","_eventHandlers","inputHandleChange","inputHandleKeyDown","inputHandleBlur","autoComplete","value","downshiftButtonIsActive","dataset","toggle","menuRef","_menuNode","getMenuProps","_temp5","_temp6","_extends3","_ref5","_ref5$refKey","_ref6","_ref6$suppressRefErro","getItemProps","_temp7","_enabledEventHandlers","_ref7","onMouseMove","onMouseDown","_ref7$item","onSelectKey","customClickHandler","avoidScrolling","clearItems","_ref8","_ref9","_this$getState5","openMenu","closeMenu","updateStatus","highlightedItem","_this$props","_this$props$initialHi","initialHighlightedIndex","_highlightedIndex","_this$props$initialIs","initialIsOpen","_isOpen","_this$props$initialIn","initialInputValue","_inputValue","_this$props$initialSe","initialSelectedItem","_selectedItem","_state","_proto","internalClearTimeouts","stateToMerge","_this4","reduce","getElementById","scrollHighlightedItemIntoView","nextHighlightedIndex","first","_this$getState6","componentDidMount","_this5","validateGetMenuPropsCalledCorrectly","targetWithinDownshift","checkActiveElement","contextNode","onMouseUp","contextWithinDownshift","onOuterClick","onTouchStart","isTouchMove","onTouchMove","onTouchEnd","addEventListener","cleanup","removeEventListener","shouldScroll","prevState","prevProps","_ref10","currentHighlightedIndex","_ref11","prevHighlightedIndex","scrollWhenOpen","componentDidUpdate","validateControlledUnchanged","selectedItemChanged","componentWillUnmount","render","children","validateGetRootPropsCalledCorrectly","cloneElement","Error","defaultProps","warn","prevItem","window","propTypes","func","number","bool","any","string","shape","_ref12","_ref13","refKeySpecified","isComposite","nextProps","warningDescription","propKey"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\n\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (node === null) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n/**\n * This return a function that will call all the given functions with\n * the arguments with which it's called. It does a null-check before\n * attempting to call the functions and can take any number of functions.\n * @param {...Function} fns the functions to call\n * @return {Function} the function that calls all the functions\n */\n\n\nfunction callAll() {\n  for (var _len4 = arguments.length, fns = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    fns[_key4] = arguments[_key4];\n  }\n\n  return function () {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    fns.forEach(function (fn) {\n      if (fn) {\n        fn.apply(void 0, args);\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      selectedItem = _ref2.selectedItem,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount,\n      itemToString = _ref2.itemToString;\n\n  if (!isOpen) {\n    return selectedItem ? itemToString(selectedItem) : '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount) {\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = itemsLastIndex;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = 0;\n  }\n\n  return newIndex;\n}\n\nvar statusDiv;\nvar cleanupStatus = debounce(function () {\n  getStatusDiv().textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus();\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\n\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Downshift, _Component);\n\n  function Downshift(_props) {\n    var _this = _Component.call(this, _props) || this;\n\n    _this.id = _this.props.id || \"downshift-\" + generateId();\n    _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n    _this.labelId = _this.props.labelId || _this.id + \"-label\";\n    _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n    _this.getItemId = _this.props.getItemId || function (index) {\n      return _this.id + \"-item-\" + index;\n    };\n\n    _this.input = null;\n    _this.items = [];\n    _this.itemCount = null;\n    _this.previousResultCount = 0;\n    _this.timeoutIds = [];\n\n    _this.internalSetTimeout = function (fn, time) {\n      var id = setTimeout(function () {\n        _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n          return i !== id;\n        });\n        fn();\n      }, time);\n\n      _this.timeoutIds.push(id);\n    };\n\n    _this.setItemCount = function (count) {\n      _this.itemCount = count;\n    };\n\n    _this.unsetItemCount = function () {\n      _this.itemCount = null;\n    };\n\n    _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n      if (highlightedIndex === void 0) {\n        highlightedIndex = _this.props.defaultHighlightedIndex;\n      }\n\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        highlightedIndex: highlightedIndex\n      }, otherStateToSet));\n    };\n\n    _this.clearSelection = function (cb) {\n      _this.internalSetState({\n        selectedItem: null,\n        inputValue: '',\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        isOpen: _this.props.defaultIsOpen\n      }, cb);\n    };\n\n    _this.selectItem = function (item, otherStateToSet, cb) {\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        isOpen: _this.props.defaultIsOpen,\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        selectedItem: item,\n        inputValue: _this.props.itemToString(item)\n      }, otherStateToSet), cb);\n    };\n\n    _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n      var item = _this.items[itemIndex];\n\n      if (item == null) {\n        return;\n      }\n\n      _this.selectItem(item, otherStateToSet, cb);\n    };\n\n    _this.selectHighlightedItem = function (otherStateToSet, cb) {\n      return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n    };\n\n    _this.internalSetState = function (stateToSet, cb) {\n      var isItemSelected, onChangeArg;\n      var onStateChangeArg = {};\n      var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n      // so someone controlling the `inputValue` state gets notified of\n      // the input change as soon as possible. This avoids issues with\n      // preserving the cursor position.\n      // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n      if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n        _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, stateToSet));\n      }\n\n      return _this.setState(function (state) {\n        state = _this.getState(state);\n        var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n        newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n        // what was selected before\n        // used to determine if onSelect and onChange callbacks should be called\n\n        isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n        var nextState = {}; // this is just used to tell whether the state changed\n\n        var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n        // and we're trying to update that state. OR if the selection has changed and we're\n        // trying to update the selection\n\n        if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n          onChangeArg = newStateToSet.selectedItem;\n        }\n\n        newStateToSet.type = newStateToSet.type || unknown;\n        Object.keys(newStateToSet).forEach(function (key) {\n          // onStateChangeArg should only have the state that is\n          // actually changing\n          if (state[key] !== newStateToSet[key]) {\n            onStateChangeArg[key] = newStateToSet[key];\n          } // the type is useful for the onStateChangeArg\n          // but we don't actually want to set it in internal state.\n          // this is an undocumented feature for now... Not all internalSetState\n          // calls support it and I'm not certain we want them to yet.\n          // But it enables users controlling the isOpen state to know when\n          // the isOpen state changes due to mouseup events which is quite handy.\n\n\n          if (key === 'type') {\n            return;\n          }\n\n          nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n          if (!_this.isControlledProp(key)) {\n            nextState[key] = newStateToSet[key];\n          }\n        }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n        // earlier, so we'll call it now that we know what the inputValue state will be.\n\n        if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, newStateToSet));\n        }\n\n        return nextState;\n      }, function () {\n        // call the provided callback if it's a function\n        cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n        // we have relevant information to pass them.\n\n        var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n        if (hasMoreStateThanType) {\n          _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n        }\n\n        if (isItemSelected) {\n          _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n        }\n\n        if (onChangeArg !== undefined) {\n          _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n        } // this is currently undocumented and therefore subject to change\n        // We'll try to not break it, but just be warned.\n\n\n        _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n      });\n    };\n\n    _this.rootRef = function (node) {\n      return _this._rootNode = node;\n    };\n\n    _this.getRootProps = function (_temp, _temp2) {\n      var _extends2;\n\n      var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\", \"ref\"]);\n\n      var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n      // this is used in the render to know whether the user has called getRootProps.\n      // It uses that to know whether to apply the props automatically\n      _this.getRootProps.called = true;\n      _this.getRootProps.refKey = refKey;\n      _this.getRootProps.suppressRefError = suppressRefError;\n\n      var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n\n      return _extends((_extends2 = {}, _extends2[refKey] = callAll(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n    };\n\n    _this.keyDownHandlers = {\n      ArrowDown: function ArrowDown(event) {\n        var _this2 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? 5 : 1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowDown\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowDown\n          }, function () {\n            var itemCount = _this2.getItemCount();\n\n            if (itemCount > 0) {\n              _this2.setHighlightedIndex(getNextWrappingIndex(1, _this2.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      ArrowUp: function ArrowUp(event) {\n        var _this3 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? -5 : -1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowUp\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowUp\n          }, function () {\n            var itemCount = _this3.getItemCount();\n\n            if (itemCount > 0) {\n              _this3.setHighlightedIndex(getNextWrappingIndex(-1, _this3.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n\n        if (isOpen && highlightedIndex != null) {\n          event.preventDefault();\n          var item = this.items[highlightedIndex];\n          var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n          if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n            return;\n          }\n\n          this.selectHighlightedItem({\n            type: keyDownEnter\n          });\n        }\n      },\n      Escape: function Escape(event) {\n        event.preventDefault();\n        this.reset({\n          type: keyDownEscape,\n          selectedItem: null,\n          inputValue: ''\n        });\n      }\n    };\n    _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      ' ': function _(event) {\n        event.preventDefault();\n        this.toggleMenu({\n          type: keyDownSpaceButton\n        });\n      }\n    });\n    _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      Home: function Home(event) {\n        this.highlightFirstOrLastIndex(event, true, {\n          type: keyDownHome\n        });\n      },\n      End: function End(event) {\n        this.highlightFirstOrLastIndex(event, false, {\n          type: keyDownEnd\n        });\n      }\n    });\n\n    _this.getToggleButtonProps = function (_temp3) {\n      var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick,\n          onPress = _ref3.onPress,\n          onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n      var _this$getState3 = _this.getState(),\n          isOpen = _this$getState3.isOpen;\n\n      var enabledEventHandlers = {\n        onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n        onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n        onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n        onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n      };\n      var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n      return _extends({\n        type: 'button',\n        role: 'button',\n        'aria-label': isOpen ? 'close menu' : 'open menu',\n        'aria-haspopup': true,\n        'data-toggle': true\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.buttonHandleKeyUp = function (event) {\n      // Prevent click event from emitting in Firefox\n      event.preventDefault();\n    };\n\n    _this.buttonHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (_this.buttonKeyDownHandlers[key]) {\n        _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.buttonHandleClick = function (event) {\n      event.preventDefault(); // handle odd case for Safari and Firefox which\n      // don't give the button the focus properly.\n\n      /* istanbul ignore if (can't reasonably test this) */\n\n      if ( _this.props.environment.document.activeElement === _this.props.environment.document.body) {\n        event.target.focus();\n      } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n      // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n      // when building for production and should therefore have no impact on production code.\n\n\n      if (process.env.NODE_ENV === 'test') {\n        _this.toggleMenu({\n          type: clickButton\n        });\n      } else {\n        // Ensure that toggle of menu occurs after the potential blur event in iOS\n        _this.internalSetTimeout(function () {\n          return _this.toggleMenu({\n            type: clickButton\n          });\n        });\n      }\n    };\n\n    _this.buttonHandleBlur = function (event) {\n      var blurTarget = event.target; // Save blur target for comparison with activeElement later\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n      _this.internalSetTimeout(function () {\n        if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n        ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n      });\n    };\n\n    _this.getLabelProps = function (props) {\n      return _extends({\n        htmlFor: _this.inputId,\n        id: _this.labelId\n      }, props);\n    };\n\n    _this.getInputProps = function (_temp4) {\n      var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput,\n          onChangeText = _ref4.onChangeText,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n      var onChangeKey;\n      var eventHandlers = {};\n      /* istanbul ignore next (preact) */\n\n      onChangeKey = 'onChange';\n\n      var _this$getState4 = _this.getState(),\n          inputValue = _this$getState4.inputValue,\n          isOpen = _this$getState4.isOpen,\n          highlightedIndex = _this$getState4.highlightedIndex;\n\n      if (!rest.disabled) {\n        var _eventHandlers;\n\n        eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      return _extends({\n        'aria-autocomplete': 'list',\n        'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n        'aria-controls': isOpen ? _this.menuId : null,\n        'aria-labelledby': _this.labelId,\n        // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n        // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n        autoComplete: 'off',\n        value: inputValue,\n        id: _this.inputId\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.inputHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && _this.inputKeyDownHandlers[key]) {\n        _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.inputHandleChange = function (event) {\n      _this.internalSetState({\n        type: changeInput,\n        isOpen: true,\n        inputValue: event.target.value,\n        highlightedIndex: _this.props.defaultHighlightedIndex\n      });\n    };\n\n    _this.inputHandleBlur = function () {\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n      _this.internalSetTimeout(function () {\n        var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n        if (!_this.isMouseDown && !downshiftButtonIsActive) {\n          _this.reset({\n            type: blurInput\n          });\n        }\n      });\n    };\n\n    _this.menuRef = function (node) {\n      _this._menuNode = node;\n    };\n\n    _this.getMenuProps = function (_temp5, _temp6) {\n      var _extends3;\n\n      var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n      var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n      _this.getMenuProps.called = true;\n      _this.getMenuProps.refKey = refKey;\n      _this.getMenuProps.suppressRefError = suppressRefError;\n      return _extends((_extends3 = {}, _extends3[refKey] = callAll(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n    };\n\n    _this.getItemProps = function (_temp7) {\n      var _enabledEventHandlers;\n\n      var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick,\n          onPress = _ref7.onPress,\n          index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n      /* istanbul ignore next */\n      undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n      if (index === undefined) {\n        _this.items.push(item);\n\n        index = _this.items.indexOf(item);\n      } else {\n        _this.items[index] = item;\n      }\n\n      var onSelectKey = 'onClick';\n      var customClickHandler = onClick;\n      var enabledEventHandlers = (_enabledEventHandlers = {\n        // onMouseMove is used over onMouseEnter here. onMouseMove\n        // is only triggered on actual mouse movement while onMouseEnter\n        // can fire on DOM changes, interrupting keyboard navigation\n        onMouseMove: callAllEventHandlers(onMouseMove, function () {\n          if (index === _this.getState().highlightedIndex) {\n            return;\n          }\n\n          _this.setHighlightedIndex(index, {\n            type: itemMouseEnter\n          }); // We never want to manually scroll when changing state based\n          // on `onMouseMove` because we will be moving the element out\n          // from under the user which is currently scrolling/moving the\n          // cursor\n\n\n          _this.avoidScrolling = true;\n\n          _this.internalSetTimeout(function () {\n            return _this.avoidScrolling = false;\n          }, 250);\n        }),\n        onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n          // This prevents the activeElement from being changed\n          // to the item so it can remain with the current activeElement\n          // which is a more common use case.\n          event.preventDefault();\n        })\n      }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n        _this.selectItemAtIndex(index, {\n          type: clickItem\n        });\n      }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n      // of the activeElement if clicking on disabled items\n\n      var eventHandlers = rest.disabled ? {\n        onMouseDown: enabledEventHandlers.onMouseDown\n      } : enabledEventHandlers;\n      return _extends({\n        id: _this.getItemId(index),\n        role: 'option',\n        'aria-selected': _this.getState().highlightedIndex === index\n      }, eventHandlers, {}, rest);\n    };\n\n    _this.clearItems = function () {\n      _this.items = [];\n    };\n\n    _this.reset = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref8) {\n        var selectedItem = _ref8.selectedItem;\n        return _extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          inputValue: _this.props.itemToString(selectedItem)\n        }, otherStateToSet);\n      }, cb);\n    };\n\n    _this.toggleMenu = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref9) {\n        var isOpen = _ref9.isOpen;\n        return _extends({\n          isOpen: !isOpen\n        }, isOpen && {\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        }, {}, otherStateToSet);\n      }, function () {\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen,\n            highlightedIndex = _this$getState5.highlightedIndex;\n\n        if (isOpen) {\n          if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n            _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n          }\n        }\n\n        cbToCb(cb)();\n      });\n    };\n\n    _this.openMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: true\n      }, cb);\n    };\n\n    _this.closeMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: false\n      }, cb);\n    };\n\n    _this.updateStatus = debounce(function () {\n      var state = _this.getState();\n\n      var item = _this.items[state.highlightedIndex];\n\n      var resultCount = _this.getItemCount();\n\n      var status = _this.props.getA11yStatusMessage(_extends({\n        itemToString: _this.props.itemToString,\n        previousResultCount: _this.previousResultCount,\n        resultCount: resultCount,\n        highlightedItem: item\n      }, state));\n\n      _this.previousResultCount = resultCount;\n      setStatus(status, _this.props.environment.document);\n    }, 200);\n\n    // fancy destructuring + defaults + aliases\n    // this basically says each value of state should either be set to\n    // the initial value or the default value if the initial value is not provided\n    var _this$props = _this.props,\n        defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n        _this$props$initialHi = _this$props.initialHighlightedIndex,\n        _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n        defaultIsOpen = _this$props.defaultIsOpen,\n        _this$props$initialIs = _this$props.initialIsOpen,\n        _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n        _this$props$initialIn = _this$props.initialInputValue,\n        _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n        _this$props$initialSe = _this$props.initialSelectedItem,\n        _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n    var _state = _this.getState({\n      highlightedIndex: _highlightedIndex,\n      isOpen: _isOpen,\n      inputValue: _inputValue,\n      selectedItem: _selectedItem\n    });\n\n    if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n      _state.inputValue = _this.props.itemToString(_state.selectedItem);\n    }\n\n    _this.state = _state;\n    return _this;\n  }\n\n  var _proto = Downshift.prototype;\n\n  /**\n   * Clear all running timeouts\n   */\n  _proto.internalClearTimeouts = function internalClearTimeouts() {\n    this.timeoutIds.forEach(function (id) {\n      clearTimeout(id);\n    });\n    this.timeoutIds = [];\n  }\n  /**\n   * Gets the state based on internal state or props\n   * If a state value is passed via props, then that\n   * is the value given, otherwise it's retrieved from\n   * stateToMerge\n   *\n   * This will perform a shallow merge of the given state object\n   * with the state coming from props\n   * (for the controlled component scenario)\n   * This is used in state updater functions so they're referencing\n   * the right state regardless of where it comes from.\n   *\n   * @param {Object} stateToMerge defaults to this.state\n   * @return {Object} the state\n   */\n  ;\n\n  _proto.getState = function getState(stateToMerge) {\n    var _this4 = this;\n\n    if (stateToMerge === void 0) {\n      stateToMerge = this.state;\n    }\n\n    return Object.keys(stateToMerge).reduce(function (state, key) {\n      state[key] = _this4.isControlledProp(key) ? _this4.props[key] : stateToMerge[key];\n      return state;\n    }, {});\n  }\n  /**\n   * This determines whether a prop is a \"controlled prop\" meaning it is\n   * state which is controlled by the outside of this component rather\n   * than within this component.\n   * @param {String} key the key to check\n   * @return {Boolean} whether it is a controlled controlled prop\n   */\n  ;\n\n  _proto.isControlledProp = function isControlledProp(key) {\n    return this.props[key] !== undefined;\n  };\n\n  _proto.getItemCount = function getItemCount() {\n    // things read better this way. They're in priority order:\n    // 1. `this.itemCount`\n    // 2. `this.props.itemCount`\n    // 3. `this.items.length`\n    var itemCount = this.items.length;\n\n    if (this.itemCount != null) {\n      itemCount = this.itemCount;\n    } else if (this.props.itemCount !== undefined) {\n      itemCount = this.props.itemCount;\n    }\n\n    return itemCount;\n  };\n\n  _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n    return this.props.environment.document.getElementById(this.getItemId(index));\n  };\n\n  _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n    /* istanbul ignore else (react-native) */\n    {\n      var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n      this.props.scrollIntoView(node, this._menuNode);\n    }\n  };\n\n  _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n    var itemCount = this.getItemCount();\n\n    if (itemCount > 0) {\n      var nextHighlightedIndex = getNextWrappingIndex(amount, this.getState().highlightedIndex, itemCount);\n      this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n    }\n  };\n\n  _proto.highlightFirstOrLastIndex = function highlightFirstOrLastIndex(event, first, otherStateToSet) {\n    var itemsLastIndex = this.getItemCount() - 1;\n\n    if (itemsLastIndex < 0 || !this.getState().isOpen) {\n      return;\n    }\n\n    event.preventDefault();\n    this.setHighlightedIndex(first ? 0 : itemsLastIndex, otherStateToSet);\n  };\n\n  _proto.getStateAndHelpers = function getStateAndHelpers() {\n    var _this$getState6 = this.getState(),\n        highlightedIndex = _this$getState6.highlightedIndex,\n        inputValue = _this$getState6.inputValue,\n        selectedItem = _this$getState6.selectedItem,\n        isOpen = _this$getState6.isOpen;\n\n    var itemToString = this.props.itemToString;\n    var id = this.id;\n    var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n    return {\n      // prop getters\n      getRootProps: getRootProps,\n      getToggleButtonProps: getToggleButtonProps,\n      getLabelProps: getLabelProps,\n      getMenuProps: getMenuProps,\n      getInputProps: getInputProps,\n      getItemProps: getItemProps,\n      // actions\n      reset: reset,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      toggleMenu: toggleMenu,\n      selectItem: selectItem,\n      selectItemAtIndex: selectItemAtIndex,\n      selectHighlightedItem: selectHighlightedItem,\n      setHighlightedIndex: setHighlightedIndex,\n      clearSelection: clearSelection,\n      clearItems: clearItems,\n      setItemCount: setItemCount,\n      unsetItemCount: unsetItemCount,\n      setState: setState,\n      // props\n      itemToString: itemToString,\n      // derived\n      id: id,\n      // state\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      selectedItem: selectedItem\n    };\n  } //////////////////////////// ROOT\n  ;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this5 = this;\n\n    /* istanbul ignore if (react-native) */\n    if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n      validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n    }\n    /* istanbul ignore if (react-native) */\n\n\n    {\n      var targetWithinDownshift = function (target, checkActiveElement) {\n        if (checkActiveElement === void 0) {\n          checkActiveElement = true;\n        }\n\n        var document = _this5.props.environment.document;\n        return [_this5._rootNode, _this5._menuNode].some(function (contextNode) {\n          return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n        });\n      }; // this.isMouseDown helps us track whether the mouse is currently held down.\n      // This is useful when the user clicks on an item in the list, but holds the mouse\n      // down long enough for the list to disappear (because the blur event fires on the input)\n      // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n      // trigger hiding the menu.\n\n\n      var onMouseDown = function () {\n        _this5.isMouseDown = true;\n      };\n\n      var onMouseUp = function (event) {\n        _this5.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n        // then we don't want to reset downshift\n\n        var contextWithinDownshift = targetWithinDownshift(event.target);\n\n        if (!contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: mouseUp\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      }; // Touching an element in iOS gives focus and hover states, but touching out of\n      // the element will remove hover, and persist the focus state, resulting in the\n      // blur event not being triggered.\n      // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n      // If the user taps outside of Downshift, the component should be reset,\n      // but not if the user is swiping\n\n\n      var onTouchStart = function () {\n        _this5.isTouchMove = false;\n      };\n\n      var onTouchMove = function () {\n        _this5.isTouchMove = true;\n      };\n\n      var onTouchEnd = function (event) {\n        var contextWithinDownshift = targetWithinDownshift(event.target, false);\n\n        if (!_this5.isTouchMove && !contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: touchEnd\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      };\n\n      var environment = this.props.environment;\n      environment.addEventListener('mousedown', onMouseDown);\n      environment.addEventListener('mouseup', onMouseUp);\n      environment.addEventListener('touchstart', onTouchStart);\n      environment.addEventListener('touchmove', onTouchMove);\n      environment.addEventListener('touchend', onTouchEnd);\n\n      this.cleanup = function () {\n        _this5.internalClearTimeouts();\n\n        _this5.updateStatus.cancel();\n\n        environment.removeEventListener('mousedown', onMouseDown);\n        environment.removeEventListener('mouseup', onMouseUp);\n        environment.removeEventListener('touchstart', onTouchStart);\n        environment.removeEventListener('touchmove', onTouchMove);\n        environment.removeEventListener('touchend', onTouchEnd);\n      };\n    }\n  };\n\n  _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n    var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref10.highlightedIndex;\n\n    var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref11.highlightedIndex;\n\n    var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n    return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (process.env.NODE_ENV !== 'production') {\n      validateControlledUnchanged(prevProps, this.props);\n      /* istanbul ignore if (react-native) */\n\n      if ( this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n    }\n\n    if (this.isControlledProp('selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n      this.internalSetState({\n        type: controlledPropUpdatedSelectedItem,\n        inputValue: this.props.itemToString(this.props.selectedItem)\n      });\n    }\n\n    if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n      this.scrollHighlightedItemIntoView();\n    }\n    /* istanbul ignore else (react-native) */\n\n\n    this.updateStatus();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.cleanup(); // avoids memory leak\n  };\n\n  _proto.render = function render() {\n    var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n    // we clear this out each render and it will be populated again as\n    // getItemProps is called.\n\n    this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n    // this render. If they do then we don't need to do anything,\n    // if they don't then we need to clone the element they return and\n    // apply the props for them.\n\n    this.getRootProps.called = false;\n    this.getRootProps.refKey = undefined;\n    this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n    this.getMenuProps.called = false;\n    this.getMenuProps.refKey = undefined;\n    this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n    this.getLabelProps.called = false; // and something similar for getInputProps\n\n    this.getInputProps.called = false;\n    var element = unwrapArray(children(this.getStateAndHelpers()));\n\n    if (!element) {\n      return null;\n    }\n\n    if (this.getRootProps.called || this.props.suppressRefError) {\n      if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n        validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n      }\n\n      return element;\n    } else if (isDOMElement(element)) {\n      // they didn't apply the root props, but we can clone\n      // this and apply the props ourselves\n      return React.cloneElement(element, this.getRootProps(getElementProps(element)));\n    }\n    /* istanbul ignore else */\n\n\n    if (process.env.NODE_ENV !== 'production') {\n      // they didn't apply the root props, but they need to\n      // otherwise we can't query around the autocomplete\n      throw new Error('downshift: If you return a non-DOM element, you must use apply the getRootProps function');\n    }\n    /* istanbul ignore next */\n\n\n    return undefined;\n  };\n\n  return Downshift;\n}(Component);\n\nDownshift.defaultProps = {\n  defaultHighlightedIndex: null,\n  defaultIsOpen: false,\n  getA11yStatusMessage: getA11yStatusMessage,\n  itemToString: function itemToString(i) {\n    if (i == null) {\n      return '';\n    }\n\n    if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n      // eslint-disable-next-line no-console\n      console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n    }\n\n    return String(i);\n  },\n  onStateChange: noop,\n  onInputValueChange: noop,\n  onUserAction: noop,\n  onChange: noop,\n  onSelect: noop,\n  onOuterClick: noop,\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window,\n  stateReducer: function stateReducer(state, stateToSet) {\n    return stateToSet;\n  },\n  suppressRefError: false,\n  scrollIntoView: scrollIntoView\n};\nDownshift.stateChangeTypes = stateChangeTypes;\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nfunction validateControlledUnchanged(prevProps, nextProps) {\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  ['selectedItem', 'isOpen', 'inputValue', 'highlightedIndex'].forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nexport default Downshift;\nexport { resetIdCounter };\n"]},"metadata":{},"sourceType":"module"}